(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{108:function(e,t){},167:function(e,t){},168:function(e,t){},173:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(14),i=n.n(o),r=n(18),s=n(15),l=n(4),d=n(211),u=n(213),j=n(204),h=n(212),b=n(202),m=n(224),p=n(200),f=n(231),g=n(206),O=n(226),x=n(209),_=n(113),w=n.n(_),v=n(205),y=n(112),k=n.n(y),S=n(1),T=n(11),P=Object(p.a)({table:{minWidth:650},TableRow:{TableCell:{color:"white"}}}),C=function(e){var t=e.user,n=e.token,c=e.getReceipts,o=P(),i=Object(a.useState)(t.isAdmin),r=Object(l.a)(i,2),s=r[0],d=r[1],u=Object(a.useState)(t.approved),h=Object(l.a)(u,2),m=h[0],p=h[1];return Object(S.jsxs)(b.a,{children:[Object(S.jsx)(j.a,{style:{padding:"0 16px"},children:t.name}),Object(S.jsx)(j.a,{style:{padding:"0 16px"},children:t.email}),Object(S.jsx)(j.a,{style:{padding:"0 16px"},children:m?"Approved":Object(S.jsx)(v.a,{onClick:function(){!function(e){if(window.confirm("Apprrove? This action cannot be reversed")){p(!0);var a={name:t.name,email:t.email,password:t.password,isAdmin:t.isAdmin,approved:!0};T.put("http://".concat(window.location.host,"/users/update/").concat(e),a,{headers:{token:n,"Content-Type":"application/json"}}).then((function(e){window.alert(e.data.message)})).catch((function(e){window.alert("some error occured please check console"),console.log(e)}))}}(t._id)},variant:"contained",color:"primary",children:"Approve"})}),Object(S.jsx)(j.a,{style:{padding:"0 16px"},children:Object(S.jsx)(g.a,{className:o.formControl,children:Object(S.jsxs)(O.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:s,onChange:function(e){!function(e,a){if(s)window.alert("Cannot change role of admin");else if(window.confirm("Make admin? After user is made admin you cannot change back")){d(a.target.value);var c={name:t.name,email:t.email,password:t.password,isAdmin:!0};T.put("http://".concat(window.location.host,"/users/updateRole/").concat(e),c,{headers:{token:n,"Content-Type":"application/json"}}).then((function(e){window.alert(e.data.message)})).catch((function(e){window.alert("some error occured please check console"),console.log(e)}))}}(t._id,e)},children:[Object(S.jsx)(f.a,{value:!0,children:"Admin"}),Object(S.jsx)(f.a,{value:!1,children:"User"})]})})}),Object(S.jsx)(j.a,{style:{padding:"0 16px",textAlign:"center"},children:Object(S.jsx)(x.a,{onClick:function(){c(t._id)},"aria-label":"update",className:o.margin,children:Object(S.jsx)(k.a,{})})}),Object(S.jsx)(j.a,{style:{padding:"0 16px",textAlign:"center"},children:Object(S.jsx)(x.a,{onClick:function(){var e;e=t._id,window.confirm("Want to delete?")&&T.delete("http://".concat(window.location.host,"/users/").concat(e),{headers:{token:n}}).then((function(e){window.alert(e.data.message),window.location.reload()})).catch((function(e){window.alert("some error occured please check console"),console.log(e)}))},"aria-label":"delete",className:o.margin,children:Object(S.jsx)(w.a,{})})})]})},B=n(88),D=n(210),F=n(219),N=n(220),E=n(37),R=n.n(E),I=n(117),A=n(33),U=n(11),W=n.n(U),L=n(217),M=function(e){var t=e.data,n=e.coloum_names,a=e.colour;return Object(S.jsx)(b.a,{style:{backgroundColor:a||""},children:n.map((function(e,n){return!!e.name&&Object(S.jsx)(j.a,{children:t[e.name]||0===t[e.name]?t[e.name].toString():""},n)}))})},z=function(e){var t=e.data,n=e.errors,c=Object(a.useState)([]),o=Object(l.a)(c,2),i=o[0],s=o[1];return Object(a.useEffect)((function(){for(var e=[],n=0,a=Object.entries(t[0]);n<a.length;n++){var c=Object(l.a)(a[n],2),o=c[0],i=c[1];e.push({name:o,value:i})}s(e)}),[t]),Object(S.jsx)(r.a,{children:Object(S.jsx)(D.a,{children:Object(S.jsx)(m.a,{style:{overflow:"auto",margin:"7px",marginTop:0,border:"1.5px solid rgb(243, 243, 243)",borderBottom:0},children:Object(S.jsxs)(d.a,{size:"small",children:[Object(S.jsx)(h.a,{children:Object(S.jsx)(b.a,{children:i.map((function(e,t){return!!e.name&&Object(S.jsx)(j.a,{children:Object(S.jsx)("b",{children:e.name})},t)}))})}),Object(S.jsx)(u.a,{children:t.map((function(e,t){return Object(S.jsx)(M,{data:e,coloum_names:i,colour:n[t]?n[t]:""},t)}))})]})})})})},q=n(229),Y=n(218),G=n(215),H=n(216),V=n(214);var J=function(e){var t=e.token,n=Object(a.useState)(!1),o=Object(l.a)(n,2),i=o[0],r=o[1],s=Object(a.useState)([]),d=Object(l.a)(s,2),u=d[0],j=d[1],h=Object(a.useState)([]),b=Object(l.a)(h,2),m=b[0],p=b[1],f=Object(a.useState)({}),g=Object(l.a)(f,2),O=g[0],x=g[1],_=Object(a.useState)(!1),w=Object(l.a)(_,2),y=w[0],k=w[1],T=Object(a.useState)(!1),P=Object(l.a)(T,2),C=P[0],D=P[1],F=Object(a.useState)(0),N=Object(l.a)(F,2),E=N[0],R=N[1],I=Object(a.useState)([]),U=Object(l.a)(I,2),M=U[0],J=U[1],K=Object(a.useState)([]),X=Object(l.a)(K,2),Q=X[0],Z=X[1],$=Object(a.useState)([]),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)([]),ce=Object(l.a)(ae,2),oe=ce[0],ie=ce[1],re=Object(a.useState)({}),se=Object(l.a)(re,2),le=se[0],de=se[1],ue=Object(a.useState)({}),je=Object(l.a)(ue,2),he=je[0],be=je[1],me=Object(a.useState)(!1),pe=Object(l.a)(me,2),fe=pe[0],ge=pe[1],Oe=function(){r(!1)},xe=function(e){var t=new FileReader;t.onload=function(e){!function(e){var t=A.read(e,{type:"binary",cellDates:!0,cellNF:!1,cellText:!1}),n={};t.SheetNames.forEach((function(e){var a=A.utils.sheet_to_row_object_array(t.Sheets[e]);console.log("sheetNames",t.SheetNames),n[e]=a})),j(n.cust_data),p(n.solutions_owner_data),x(n),k(!0)}(e.target.result)},t.readAsBinaryString(e)};return Object(a.useEffect)((function(){var e=!0;if(y){if(u.length){for(var t=[],n=["cust_id","cust_tax_id","cust_pan","cust_firm","cust_keyman","cust_email","cust_ph_isd","cust_ph_num","cust_add_cntry","cust_add_zip","cust_add_state","cust_add_city","cust_add_landmark","cust_add_street","invoice_dt","invoice_num","invoice_currency","invoice_amt","discount","email_dt","desc","TDS","GST","due_date","reminder_1","reminder_2","final_bal_due","email_dt","paid","nonSystem_payment_method","Shown_in_System_Fag","nonSystem_payment_date","nonSystem_payment_amt"],a=0;a<u.length;a++){for(var c=[],o=0,i=Object.entries(u[a]);o<i.length;o++){var r=Object(l.a)(i[o],2),s=r[0],d=r[1];c.push(s),d||0!==d&&(e=!1,t.push({row:a,cloumn_name:s}))}for(var j=0;j<n.length;j++){for(var h=!1,b=0;b<c.length;b++)c[b]===n[j]&&(h=!0);h||(e=!1,t.push({row:a,cloumn_name:n[j]}))}}J(t)}if(m.length){for(var p=[],f=["so_keyman","so_keyman_title","so_email","so_position","so_ph_isd","so_ph_num","so_add_cntry","so_add_zip","so_add_state","so_add_city","so_add_street","so_firm","so_firm_email","so_firm_acc_name","so_firm_acc_num","so_firm_ifsc","so_firm_swift","so_firm_ph_isd","so_firm_ph_num","so_firm_add_cntry","so_firm_add_zip","so_firm_add_state","so_firm_add_city","so_firm_add_street"],g=0;g<m.length;g++){for(var O=[],x=0,_=Object.entries(m[g]);x<_.length;x++){var w=Object(l.a)(_[x],2),v=w[0],k=w[1];O.push(v),k||0!==k&&(e=!1,p.push({row:g,cloumn_name:v}))}for(var S=0;S<f.length;S++){for(var T=!1,P=0;P<O.length;P++)O[P]===f[S]&&(T=!0);T||(e=!1,p.push({row:g,cloumn_name:f[S]}))}}Z(p)}e?D(!0):window.alert("Missing Data in user data sheet. Fix it to send file")}}),[y,m,u]),Object(a.useEffect)((function(){for(var e=[],t=[],n=0;n<u.length;n++){for(var a={},c=0,o=Object.entries(u[n]);c<o.length;c++){var i=Object(l.a)(o[c],2),r=i[0],s=i[1];if("invoice_dt"===r||"cust_tax_id"===r||"cust_keyman"===r||"cust_email"===r||"cust_firm"===r||"invoice_num"===r||"invoice_currency"===r||"email_dt"===r||"final_bal_due"===r)if("final_bal_due"===r)a[r]=parseFloat(s);else if("email_dt"===r||"invoice_dt"===r||"due_date"===r){var d=new Date(s);a[r]=d.toDateString()}else a[r]=s}e.push(a)}for(var j=0;j<m.length;j++){for(var h={},b=0,p=Object.entries(m[j]);b<p.length;b++){var f=Object(l.a)(p[b],2),g=f[0],O=f[1];"so_keyman"!==g&&"so_email"!==g&&"so_firm_email"!==g&&"so_firm_email"!==g&&"so_firm_acc_name"!==g&&"so_firm_acc_num"!==g&&"so_firm_ifsc"!==g&&"so_firm_swift"!==g||(h[g]=O)}t.push(h)}ne(e),ie(t)}),[m,u]),Object(a.useEffect)((function(){for(var e={},t=0;t<M.length;t++){[].includes(M[t].cloumn_name)&&(e[M[t].row]="#FF6666"),["invoice_dt","cust_tax_id","cust_keyman","cust_email","cust_firm","invoice_num","invoice_currency","email_dt","final_bal_due"].includes(M[t].cloumn_name)&&(ge(!0),e[M[t].row]="#FFB266")}de(e);for(var n={},a=0;a<Q.length;a++){[].includes(Q[a].cloumn_name)&&(n[Q[a].row]="#FF6666"),["so_firm_acc_name","so_firm_acc_num","so_firm_ifsc","so_firm_swift"].includes(Q[a].cloumn_name)&&(ge(!0),n[Q[a].row]="#FFB266")}be(n)}),[M,Q]),Object(S.jsxs)(c.a.Fragment,{children:[Object(S.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){r(!0)},style:{marginRight:"10px"},children:"Upload Invoices"}),Object(S.jsxs)(q.a,{fullWidth:!0,maxWidth:"xl",open:i,onClose:Oe,"aria-labelledby":"max-width-dialog-title",children:[Object(S.jsxs)(V.a,{id:"max-width-dialog-title",children:["Invoice"," ",Object(S.jsx)(v.a,{onClick:Oe,color:"primary",style:{float:"right"},children:"Close"})]}),Object(S.jsxs)(G.a,{children:[Object(S.jsxs)(H.a,{children:["Upload the file which contains the invoice data of clients",Object(S.jsx)("br",{}),' The fields below show an abstraction of your data. Please check that it is correct before clicking on "Send Data" which will store your file tables in the database.']}),Object(S.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(S.jsxs)(v.a,{variant:"contained",color:"primary",component:"label",title:"the files that contain your bill, receipt and your firm's data",children:[Object(S.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:function(e){xe(e.target.files[0])},hidden:!0}),"Upload File"]}),y?Object(S.jsxs)("div",{children:[Object(S.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h6",align:"left",gutterBottom:!0,children:"Users Data"}),Object(S.jsx)(z,{data:te,errors:le},"table1"),Object(S.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h6",align:"left",gutterBottom:!0,title:"The files you have uploaded will now be sent to the database.",children:"Solution Owners Data"}),Object(S.jsx)(z,{data:oe,errors:he},"table2"),!C&&Object(S.jsxs)("div",{children:[!!M&&Object(S.jsxs)(c.a.Fragment,{children:[Object(S.jsx)("p",{children:Object(S.jsx)("b",{children:"Errors Found in cust_data sheet:"})}),M.length?M.map((function(e){return Object(S.jsxs)("p",{children:["Missing item in cloumn ",e.cloumn_name," of row"," ",e.row]})})):"No errors"]}),!!Q&&Object(S.jsxs)(c.a.Fragment,{children:[Object(S.jsx)("p",{children:Object(S.jsx)("b",{children:"Errors Found in SO_data sheet:"})}),Q.length?Q.map((function(e){return Object(S.jsxs)("p",{children:["Missing item in cloumn ",e.cloumn_name," of row"," ",e.row]})})):"No errors"]})]}),E>0?Object(S.jsx)(L.a,{variant:"determinate",value:E}):""]}):""]})]}),Object(S.jsx)(Y.a,{children:y&&Object(S.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){var e={headers:{token:t},onUploadProgress:function(e){var t=e.loaded,n=e.total,a=Math.floor(100*t/n);a<100&&R(a)}};fe?window.alert("There is some error in the file uploaded. Please fix it to upload the file"):W.a.post("http://".concat(window.location.host,"/invoices/uploadBillsData"),O,e).then((function(e){R(100),setTimeout((function(){R(0)}),1e3),console.log(e),window.alert(e.data.message)})).catch((function(e){console.log(e),window.alert("some error occured please check console")}))},disabled:!C,children:"Send Invoices Data"})})]})]})};var K=function(e){var t=e.token,n=Object(a.useState)([]),o=Object(l.a)(n,2),i=o[0],r=o[1],s=Object(a.useState)([]),d=Object(l.a)(s,2),u=d[0],j=d[1],h=c.a.useState(!1),b=Object(l.a)(h,2),m=b[0],p=b[1],f=Object(a.useState)({}),g=Object(l.a)(f,2),O=g[0],x=g[1],_=Object(a.useState)(!1),w=Object(l.a)(_,2),y=w[0],k=w[1],T=Object(a.useState)(!1),P=Object(l.a)(T,2),C=P[0],D=P[1],F=Object(a.useState)(0),N=Object(l.a)(F,2),E=N[0],R=N[1],I=Object(a.useState)(!1),U=Object(l.a)(I,2),M=U[0],J=U[1],K=Object(a.useState)([]),X=Object(l.a)(K,2),Q=X[0],Z=X[1],$=Object(a.useState)([]),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)([]),ce=Object(l.a)(ae,2),oe=ce[0],ie=ce[1],re=Object(a.useState)([]),se=Object(l.a)(re,2),le=se[0],de=se[1],ue=Object(a.useState)([]),je=Object(l.a)(ue,2),he=je[0],be=je[1],me=Object(a.useState)([]),pe=Object(l.a)(me,2),fe=pe[0],ge=pe[1],Oe=Object(a.useState)({}),xe=Object(l.a)(Oe,2),_e=xe[0],we=xe[1],ve=Object(a.useState)({}),ye=Object(l.a)(ve,2),ke=ye[0],Se=ye[1],Te=Object(a.useState)(!1),Pe=Object(l.a)(Te,2),Ce=Pe[0],Be=Pe[1],De=c.a.useRef(null),Fe=function(){p(!1)},Ne=function(e){var t=new FileReader;t.onload=function(e){!function(e){var t=A.read(e,{type:"binary",cellDates:!0,cellNF:!1,cellText:!1}),n={};t.SheetNames.forEach((function(e){var a=A.utils.sheet_to_row_object_array(t.Sheets[e]);console.log("sheetNames",t.SheetNames),n[e]=a})),r(n.cust_data),j(n.solutions_owner_data),x(n),k(!0)}(e.target.result)},t.readAsBinaryString(e)};return Object(a.useEffect)((function(){console.log("data of users",i),console.log("data of so",u),console.log("data in total",O)}),[i,u,O]),Object(a.useEffect)((function(){var e=!0;if(y){if(i.length){for(var t=[],n=["cust_id","cust_tax_id","cust_pan","cust_firm","cust_keyman","cust_email","cust_ph_isd","cust_ph_num","cust_add_cntry","cust_add_zip","cust_add_state","cust_add_city","cust_add_landmark","cust_add_street","invoice_dt","invoice_num","invoice_currency","invoice_amt","discount","email_dt","desc","TDS","GST","due_date","reminder_1","reminder_2","final_bal_due","recurring","Frequency","email_dt","paid","nonSystem_payment_method","Shown_in_System_Fag","nonSystem_payment_date","nonSystem_payment_amt"],a=0;a<i.length;a++){for(var c=[],o=0,r=Object.entries(i[a]);o<r.length;o++){var s=Object(l.a)(r[o],2),d=s[0],j=s[1];c.push(d),j||0!==j&&(e=!1,t.push({row:a,cloumn_name:d}))}for(var h=0;h<n.length;h++){for(var b=!1,m=0;m<c.length;m++)c[m]===n[h]&&(b=!0);b||(e=!1,t.push({row:a,cloumn_name:n[h]}))}}be(t)}if(u.length){for(var p=[],f=["so_keyman","so_keyman_title","so_email","so_position","so_ph_isd","so_ph_num","so_add_cntry","so_add_zip","so_add_state","so_add_city","so_add_street","so_firm","so_firm_email","so_firm_acc_name","so_firm_acc_num","so_firm_ifsc","so_firm_swift","so_firm_ph_isd","so_firm_ph_num","so_firm_add_cntry","so_firm_add_zip","so_firm_add_state","so_firm_add_city","so_firm_add_street"],g=0;g<u.length;g++){for(var O=[],x=0,_=Object.entries(u[g]);x<_.length;x++){var w=Object(l.a)(_[x],2),v=w[0],k=w[1];O.push(v),k||0!==k&&(e=!1,p.push({row:g,cloumn_name:v}))}for(var S=0;S<f.length;S++){for(var T=!1,P=0;P<O.length;P++)O[P]===f[S]&&(T=!0);T||(e=!1,p.push({row:g,cloumn_name:f[S]}))}}ge(p)}e?D(!0):window.alert("Missing Data in user data sheet. Fix it to send file")}}),[y,u,i]),Object(a.useEffect)((function(){for(var e=[],t=[],n=0;n<i.length;n++){for(var a={},c=0,o=Object.entries(i[n]);c<o.length;c++){var r=Object(l.a)(o[c],2),s=r[0],d=r[1];if("invoice_dt"===s||"cust_tax_id"===s||"cust_keyman"===s||"cust_email"===s||"cust_firm"===s||"invoice_num"===s||"invoice_currency"===s||"email_dt"===s||"final_bal_due"===s)if("final_bal_due"===s)a[s]=parseFloat(d);else if("email_dt"===s||"invoice_dt"===s||"due_date"===s){var j=new Date(d);a[s]=j.toDateString()}else a[s]=d}e.push(a)}for(var h=0;h<u.length;h++){for(var b={},m=0,p=Object.entries(u[h]);m<p.length;m++){var f=Object(l.a)(p[m],2),g=f[0],O=f[1];"so_keyman"!==g&&"so_email"!==g&&"so_firm_email"!==g&&"so_firm_email"!==g&&"so_firm_acc_name"!==g&&"so_firm_acc_num"!==g&&"so_firm_ifsc"!==g&&"so_firm_swift"!==g||(b[g]=O)}t.push(b)}ie(e),de(t)}),[u,i]),Object(a.useEffect)((function(){for(var e={},t=0;t<he.length;t++){[].includes(he[t].cloumn_name)&&(e[he[t].row]="#FF6666"),["invoice_dt","cust_tax_id","cust_keyman","cust_email","cust_firm","invoice_num","invoice_currency","email_dt","final_bal_due"].includes(he[t].cloumn_name)&&(Be(!0),e[he[t].row]="#FFB266")}we(e);for(var n={},a=0;a<fe.length;a++){[].includes(fe[a].cloumn_name)&&(n[fe[a].row]="#FF6666"),["so_firm_acc_name","so_firm_acc_num","so_firm_ifsc","so_firm_swift"].includes(fe[a].cloumn_name)&&(Be(!0),n[fe[a].row]="#FFB266")}Se(n)}),[he,fe]),Object(a.useEffect)((function(){De.current&&De.current.scrollIntoView({behaviour:"smooth"})}),[M]),Object(S.jsxs)(c.a.Fragment,{children:[Object(S.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){p(!0)},style:{marginRight:"10px"},children:"Upload Receipts"}),Object(S.jsxs)(q.a,{fullWidth:!0,maxWidth:"xl",open:m,onClose:Fe,"aria-labelledby":"max-width-dialog-title",children:[Object(S.jsxs)(V.a,{id:"max-width-dialog-title",children:["Receipts",Object(S.jsx)(v.a,{onClick:Fe,color:"primary",style:{float:"right"},children:"Close"})]}),Object(S.jsxs)(G.a,{children:[Object(S.jsxs)(H.a,{children:["Enter the receipt data here ONLY against invoices for which payment was received outside this system such as cash, a paper-based check, etc.",Object(S.jsx)("br",{}),' The fields below show an abstraction of your data. Please check that it is correct before clicking on "Send Data" which will store your file tables in the database.']}),Object(S.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(S.jsxs)(v.a,{variant:"contained",color:"primary",component:"label",children:[Object(S.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:function(e){Ne(e.target.files[0])},hidden:!0}),"Upload File"]}),y&&Object(S.jsxs)("div",{children:[Object(S.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h6",align:"center",gutterBottom:!0,children:"Users Data :"}),Object(S.jsx)(z,{data:oe,errors:_e},"table1"),Object(S.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h6",align:"center",gutterBottom:!0,children:"Solution Owners Data :"}),Object(S.jsx)(z,{data:le,errors:ke},"table2"),!C&&Object(S.jsxs)("div",{children:[he&&Object(S.jsxs)(c.a.Fragment,{children:[Object(S.jsx)("p",{children:Object(S.jsx)("b",{children:"Errors Found in cust_data sheet:"})}),he.length?he.map((function(e){return Object(S.jsxs)("p",{children:["Missing item in cloumn ",e.cloumn_name," of row"," ",e.row]})})):"No errors"]}),fe&&Object(S.jsxs)(c.a.Fragment,{children:[Object(S.jsx)("p",{children:Object(S.jsx)("b",{children:"Errors Found in SO_data sheet:"})}),fe.length?fe.map((function(e){return Object(S.jsxs)("p",{children:["Missing item in cloumn ",e.cloumn_name," of row"," ",e.row]})})):"No errors"]})]}),M&&Object(S.jsxs)("div",{ref:De,style:{marginTop:"10px"},children:[Q.length?Object(S.jsxs)("div",{children:[Object(S.jsx)("p",{children:Object(S.jsx)("b",{children:"Emails Not Found:"})}),Q.map((function(e,t){return Object(S.jsx)("p",{children:e},t)}))]}):Object(S.jsx)("p",{children:Object(S.jsx)("b",{children:"All emails found"})}),te.length?Object(S.jsxs)("div",{children:[Object(S.jsx)("p",{children:Object(S.jsx)("b",{children:"Bills Not Found:"})}),te.map((function(e,t){return Object(S.jsx)("p",{children:e},t)}))]}):Object(S.jsxs)("p",{children:[" ",Object(S.jsx)("b",{children:"All bills found"})]})]}),E>0&&Object(S.jsx)(L.a,{variant:"determinate",value:E})]})]})]}),Object(S.jsx)(Y.a,{children:y&&Object(S.jsxs)(c.a.Fragment,{children:[Object(S.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){var e={headers:{token:t},onUploadProgress:function(e){var t=e.loaded,n=e.total,a=Math.floor(100*t/n);a<100&&R(a)}};W.a.post("http://".concat(window.location.host,"/invoices/confrimReceiptsUpload"),O,e).then((function(e){R(100),setTimeout((function(){R(0)}),1e3),console.log(e.data),e.data.missing&&(Z(e.data.not_found.emails),ne(e.data.not_found.bills)),J(!0)})).catch((function(e){console.log(e),window.alert("some error occured please check console")}))},disabled:!C,style:{display:M?"none":"block"},children:"Send Receipts Data"}),M&&Object(S.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){var e={headers:{token:t},onUploadProgress:function(e){var t=e.loaded,n=e.total,a=Math.floor(100*t/n);a<100&&R(a)}};Ce?window.alert("There is some error in the file uploaded. Please fix it to upload the file"):W.a.post("http://".concat(window.location.host,"/invoices/uploadReceiptsData"),O,e).then((function(e){R(100),setTimeout((function(){R(0)}),1e3),console.log(e),window.alert(e.data.message)})).catch((function(e){console.log(e),window.alert("some error occured please check console")}))},children:"Confrim and Submit"})]})})]})]})};var X=function(e){var t=e.token,n=Object(a.useState)([]),o=Object(l.a)(n,2),i=o[0],r=o[1],s=c.a.useState(!1),d=Object(l.a)(s,2),u=d[0],j=d[1],h=Object(a.useState)({}),b=Object(l.a)(h,2),m=b[0],p=b[1],f=Object(a.useState)(!1),g=Object(l.a)(f,2),O=g[0],x=g[1],_=Object(a.useState)(!1),w=Object(l.a)(_,2),y=w[0],k=w[1],T=Object(a.useState)(0),P=Object(l.a)(T,2),C=P[0],D=P[1],F=Object(a.useState)([]),N=Object(l.a)(F,2),E=N[0],R=N[1],I=Object(a.useState)([]),U=Object(l.a)(I,2),M=U[0],J=U[1],K=Object(a.useState)({}),X=Object(l.a)(K,2),Q=X[0],Z=X[1],$=Object(a.useState)(!1),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ae=function(){j(!1)},ce=function(e){var t=new FileReader;t.onload=function(e){!function(e){var t=A.read(e,{type:"binary",cellDates:!0,cellNF:!1,cellText:!1}),n={};t.SheetNames.forEach((function(e){var a=A.utils.sheet_to_row_object_array(t.Sheets[e]);console.log("sheetNames",t.SheetNames),n[e]=a})),r(n.cust_data),p(n),x(!0)}(e.target.result)},t.readAsBinaryString(e)};return Object(a.useEffect)((function(){console.log("data of users",i),console.log("data in total",m)}),[i,m]),Object(a.useEffect)((function(){var e=!0;if(O){if(i.length){for(var t=[],n=["cust_id","cust_tax_id","cust_pan","cust_firm","cust_keyman","cust_email","cust_ph_isd","cust_ph_num","cust_add_cntry","cust_add_zip","cust_add_state","cust_add_city","cust_add_landmark","cust_add_street"],a=0;a<i.length;a++){for(var c=[],o=0,r=Object.entries(i[a]);o<r.length;o++){var s=Object(l.a)(r[o],2),d=s[0],u=s[1];c.push(d),u||0!==u&&(e=!1,t.push({row:a,cloumn_name:d}))}for(var j=0;j<n.length;j++){for(var h=!1,b=0;b<c.length;b++)c[b]===n[j]&&(h=!0);h||(e=!1,t.push({row:a,cloumn_name:n[j]}))}}J(t)}e?k(!0):window.alert("Missing Data in user data sheet. Fix it to send file")}}),[O,i]),Object(a.useEffect)((function(){for(var e=[],t=0;t<i.length;t++){for(var n={},a=0,c=Object.entries(i[t]);a<c.length;a++){var o=Object(l.a)(c[a],2),r=o[0],s=o[1];if("cust_tax_id"===r||"cust_keyman"===r||"cust_email"===r||"cust_firm"===r)if("final_bal_due"===r)n[r]=Math.round(100*s)/100;else if("email_dt"===r||"invoice_dt"===r){var d=new Date(s);n[r]=d.toDateString()}else n[r]=s}e.push(n)}R(e)}),[i]),Object(a.useEffect)((function(){for(var e={},t=0;t<M.length;t++){[].includes(M[t].cloumn_name)&&(e[M[t].row]="#FF6666"),["cust_tax_id","cust_keyman","cust_email","cust_firm"].includes(M[t].cloumn_name)&&(ne(!0),e[M[t].row]="#FFB266")}Z(e)}),[M]),Object(S.jsxs)(c.a.Fragment,{children:[Object(S.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){j(!0)},style:{marginRight:"10px"},children:"Upload Users Data"}),Object(S.jsxs)(q.a,{fullWidth:!0,maxWidth:"xl",open:u,onClose:ae,"aria-labelledby":"max-width-dialog-title",children:[Object(S.jsxs)(V.a,{id:"max-width-dialog-title",children:["Receipts",Object(S.jsx)(v.a,{onClick:ae,color:"primary",style:{float:"right"},children:"Close"})]}),Object(S.jsxs)(G.a,{children:[Object(S.jsx)(H.a,{children:"Upload a file which contains user data."}),Object(S.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(S.jsxs)(v.a,{variant:"contained",color:"primary",component:"label",children:[Object(S.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:function(e){ce(e.target.files[0])},hidden:!0}),"Upload File"]}),O&&Object(S.jsxs)("div",{children:[Object(S.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h6",align:"center",gutterBottom:!0,children:"Users Data :"}),Object(S.jsx)(z,{data:E,errors:Q},"table1"),!y&&Object(S.jsx)("div",{children:M&&Object(S.jsxs)(c.a.Fragment,{children:[Object(S.jsx)("p",{children:Object(S.jsx)("b",{children:"Errors Found in cust_data sheet:"})}),M.length?M.map((function(e){return Object(S.jsxs)("p",{children:["Missing item in cloumn ",e.cloumn_name," of row"," ",e.row]})})):"No errors"]})}),C>0&&Object(S.jsx)(L.a,{variant:"determinate",value:C})]})]})]}),Object(S.jsx)(Y.a,{children:O&&Object(S.jsx)(c.a.Fragment,{children:Object(S.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){var e={headers:{token:t},onUploadProgress:function(e){var t=e.loaded,n=e.total,a=Math.floor(100*t/n);a<100&&D(a)}};te?window.alert("There is some error in the file uploaded. Please fix it to upload the file"):W.a.post("http://".concat(window.location.host,"/users/uploadUsers"),m,e).then((function(e){D(100),setTimeout((function(){D(0)}),1e3),console.log(e),window.alert(e.data.message)})).catch((function(e){console.log(e),window.alert("some error occured please check console")}))},disabled:!y,style:{display:O?"block":"none"},children:"Send User Data"})})})]})]})},Q=Object(p.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}}));function Z(e){var t=e.username,n=e.token,a=Q(),o=c.a.useState(null),i=Object(l.a)(o,2),r=i[0],s=i[1];return Object(S.jsx)("div",{className:a.root,children:Object(S.jsx)(F.a,{position:"static",style:{marginBottom:"5px"},children:Object(S.jsxs)(N.a,{children:[Object(S.jsx)(x.a,{href:"/",edge:"start",className:a.menuButton,color:"inherit","aria-label":"home",children:Object(S.jsx)(R.a,{})}),Object(S.jsx)(B.a,{variant:"h6",className:a.title,children:"Payment management service"}),Object(S.jsxs)("div",{children:[Object(S.jsx)(J,{token:n}),Object(S.jsx)(K,{token:n}),Object(S.jsx)(X,{token:n}),Object(S.jsxs)(v.a,{className:a.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:[t,Object(S.jsx)("span",{className:"material-icons-outlined",children:"expand_more"})]}),Object(S.jsxs)(I.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){s(null)},children:[Object(S.jsx)(f.a,{onClick:function(){window.location.replace("http://".concat(window.location.host,"/myAccount"))},children:"My account"}),Object(S.jsx)(f.a,{onClick:function(){localStorage.removeItem("token"),window.location.replace("http://".concat(window.location.host))},children:"Logout"})]})]})]})})})}var $=n(116),ee=n.n($),te=n(221),ne=n(227),ae=n(232),ce=n(176);var oe=[{id:"invoice",numeric:!1,date:!1,disablePadding:!0,label:"Invoice"},{id:"invoice_date",numeric:!0,disablePadding:!1,label:"Invoice Date"},{id:"currency",numeric:!0,disablePadding:!1,label:"Currency"},{id:"due_amount",numeric:!0,disablePadding:!1,label:"Due Amount"},{id:"due_date",numeric:!0,disablePadding:!1,label:"Due Date"},{id:"amount_paid",numeric:!0,disablePadding:!1,label:"Amount Paid"},{id:"receipt",numeric:!0,disablePadding:!1,label:"Receipt"}],ie=function(e){var t,n,a=(e=e.toString()).indexOf(".");if(a>=0?(t=e.slice(0,a),n=e.slice(a)):(t=e,n=""),t.length>3){for(var c=t.slice(0,t.length-3)+","+t.slice(t.length-3),o=2;c.length-4-o>0;o+=3)c=c.slice(0,c.length-4-o)+","+c.slice(c.length-4-o);return c+n}return e};function re(e,t,n){var a=new Date(t[n]).getTime(),c=new Date(e[n]).getTime();return a<c?-1:a>c?1:0}function se(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function le(e,t){return"invoice_date"===t||"due_date"===t?"desc"===e?function(e,n){return re(e,n,t)}:function(e,n){return-re(e,n,t)}:"desc"===e?function(e,n){return se(e,n,t)}:function(e,n){return-se(e,n,t)}}function de(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function ue(e){var t=e.classes,n=e.order,a=e.orderBy,c=e.onRequestSort;return Object(S.jsx)(h.a,{children:Object(S.jsx)(b.a,{children:oe.map((function(e,o){return Object(S.jsx)(j.a,{align:e.numeric?"right":"left",sortDirection:a===e.id&&n,style:{paddingLeft:"10px"},children:Object(S.jsxs)(ae.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(i=e.id,function(e){c(e,i)}),children:[Object(S.jsxs)("b",{children:[" ",e.label]}),a===e.id?Object(S.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id+o);var i}))})})}var je=Object(p.a)((function(e){return{paper:{marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function he(e){var t=e.rows_data,n=e.inAdmin,o=je(),i=c.a.useState("asc"),r=Object(l.a)(i,2),s=r[0],h=r[1],m=c.a.useState("invoice_date"),p=Object(l.a)(m,2),f=p[0],g=p[1],O=c.a.useState(0),x=Object(l.a)(O,2),_=x[0],w=x[1],v=c.a.useState(5),y=Object(l.a)(v,2),k=y[0],T=y[1],P=c.a.useState([]),C=Object(l.a)(P,2),D=C[0],F=C[1];c.a.useEffect((function(){F(t.map((function(e){return function(e,t,n,a,c,o,i){return{invoice:e,invoice_date:t,currency:n,due_amount:a,due_date:c,amount_paid:o,receipt:i}}(e.bill_url?Object(S.jsx)("a",{style:{textDecoration:"none"},href:e.bill_url,children:e.invoice_num}):Object(S.jsx)("p",{style:{textDecoration:"none"},children:e.invoice_num}),e.invoice_detials.invoice_dt,e.invoice_detials.invoice_currency,e.invoice_detials.final_bal_due,e.invoice_detials.due_date,e.invoice_detials.final_bal_due,Object(S.jsx)("a",{style:{textDecoration:"none"},href:e.receipt_url,children:"R_"+e.invoice_num}))})))}),[t]);return Object(a.useEffect)((function(){return console.log(de(D,le(s,f)).slice(_*k,_*k+k))}),[D,f,_,k,s]),Object(S.jsxs)("div",{style:{margin:"10px",marginInline:"30px"},children:[n?"":Object(S.jsx)(B.a,{style:{marginTop:"5px"},variant:"h6",component:"h6",align:"left",gutterBottom:!0,children:Object(S.jsx)("b",{children:" Paid Invoices"})}),Object(S.jsx)(ce.a,{className:o.paper,children:Object(S.jsxs)(te.a,{children:[Object(S.jsxs)(d.a,{className:o.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table",children:[Object(S.jsx)(ue,{classes:o,order:s,orderBy:f,onRequestSort:function(e,t){h(f===t&&"asc"===s?"desc":"asc"),g(t)}}),Object(S.jsx)(u.a,{children:de(D,le(s,f)).slice(_*k,_*k+k).map((function(e,t){var n="enhanced-table-checkbox-".concat(t);return Object(S.jsxs)(b.a,{hover:!0,tabIndex:-1,children:[Object(S.jsx)(j.a,{component:"th",id:n,scope:"row",style:{paddingLeft:"10px"},children:e.invoice}),Object(S.jsx)(j.a,{align:"right",children:e.invoice_date}),Object(S.jsx)(j.a,{align:"right",children:e.currency}),Object(S.jsx)(j.a,{align:"right",children:ie(e.due_amount)}),Object(S.jsx)(j.a,{align:"right",children:e.due_date}),Object(S.jsx)(j.a,{align:"right",children:ie(e.amount_paid)}),Object(S.jsx)(j.a,{align:"right",children:e.receipt})]},t)}))})]}),Object(S.jsx)(ne.a,{rowsPerPageOptions:[5,10,25],component:"div",count:D.length,rowsPerPage:k,page:_,onChangePage:function(e,t){w(t)},onChangeRowsPerPage:function(e){T(parseInt(e.target.value,10)),w(0)}})]})})]})}var be=n(87),me=n.n(be),pe=n(114),fe=n(115),ge=n.n(fe),Oe=n(11);function xe(e){return new Promise((function(t){var n=document.createElement("script");n.src=e,n.onload=function(){t(!0)},n.onerror=function(){t(!1)},document.body.appendChild(n)}))}var _e=function(e){var t=e.token,n=e.id,a=e.bill,c=function(){var e=Object(pe.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe("https://checkout.razorpay.com/v1/checkout.js");case 2:if(e.sent){e.next=6;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 6:Oe.get("http://".concat(window.location.host,"/payment/razorpay/").concat(n),{headers:{token:t}}).then((function(e){console.log(e.data);var t=localStorage.getItem("user"),n={key:e.data.key,currency:e.data.currency,amount:e.data.amount.toString(),order_id:e.data.id,name:"Pay Bill",description:a.invoice_detials.desc,image:"https://i.ibb.co/7XDR2G9/Koyo-logo.jpg",handler:function(e){alert("Payment made successfully. Check mail for receipt")}};t&&(n.prefill={name:t.name,email:t.email,phone_number:t.cust_ph_num}),new window.Razorpay(n).open()})).catch((function(e){window.alert("Some error occured in connecting to RazorPay"),console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(v.a,{onClick:c,"aria-label":"view",children:[Object(S.jsx)(ge.a,{style:{marginRight:"5px"}}),"Pay Bill"]})},we=function(e){var t,n,a=(e=e.toString()).indexOf(".");if(a>=0?(t=e.slice(0,a),n=e.slice(a)):(t=e,n=""),t.length>3){for(var c=t.slice(0,t.length-3)+","+t.slice(t.length-3),o=2;c.length-4-o>0;o+=3)c=c.slice(0,c.length-4-o)+","+c.slice(c.length-4-o);return c+n}return e};function ve(e,t,n){var a=new Date(t[n]).getTime(),c=new Date(e[n]).getTime();return a<c?-1:a>c?1:0}function ye(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ke(e,t){return"invoice_date"===t||"due_date"===t?"desc"===e?function(e,n){return ve(e,n,t)}:function(e,n){return-ve(e,n,t)}:"desc"===e?function(e,n){return ye(e,n,t)}:function(e,n){return-ye(e,n,t)}}function Se(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var Te=Object(p.a)((function(e){return{paper:{marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Pe(e){var t=e.rows_data,n=e.token,o=e.inAdmin,i=Te(),r=c.a.useState("asc"),s=Object(l.a)(r,2),m=s[0],p=s[1],f=c.a.useState("invoice_date"),g=Object(l.a)(f,2),O=g[0],x=g[1],_=c.a.useState(0),w=Object(l.a)(_,2),v=w[0],y=w[1],k=c.a.useState(5),T=Object(l.a)(k,2),P=T[0],C=T[1],B=c.a.useState([]),D=Object(l.a)(B,2),F=D[0],N=D[1],E=o?[{id:"invoice",numeric:!1,date:!1,disablePadding:!0,label:"Invoice"},{id:"invoice_date",numeric:!0,disablePadding:!1,label:"Invoice Date"},{id:"currency",numeric:!0,disablePadding:!1,label:"Currency"},{id:"due_amount",numeric:!0,disablePadding:!1,label:"Due Amount"},{id:"due_date",numeric:!0,disablePadding:!1,label:"Due Date"}]:[{id:"invoice",numeric:!1,date:!1,disablePadding:!0,label:"Invoice"},{id:"invoice_date",numeric:!0,disablePadding:!1,label:"Invoice Date"},{id:"currency",numeric:!0,disablePadding:!1,label:"Currency"},{id:"due_amount",numeric:!0,disablePadding:!1,label:"Due Amount"},{id:"due_date",numeric:!0,disablePadding:!1,label:"Due Date"},{id:"pay_bill",numeric:!0,disablePadding:!1,label:"Pay"}];function R(e){var t=e.classes,n=e.order,a=e.orderBy,c=e.onRequestSort;return Object(S.jsx)(h.a,{children:Object(S.jsx)(b.a,{children:E.map((function(e,o){return Object(S.jsx)(j.a,{align:e.numeric?"right":"left",sortDirection:a===e.id&&n,style:{paddingLeft:"10px"},children:Object(S.jsxs)(ae.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(i=e.id,function(e){c(e,i)}),children:[Object(S.jsxs)("b",{children:[" ",e.label]}),a===e.id?Object(S.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id+o);var i}))})})}c.a.useEffect((function(){N(t.map((function(e){return function(e,t,n,a,c,o){return{invoice:e,invoice_date:t,currency:n,due_amount:a,due_date:c,payBill:o}}(e.bill_url?Object(S.jsx)("a",{style:{textDecoration:"none"},href:e.bill_url,children:e.invoice_num}):Object(S.jsx)("p",{style:{textDecoration:"none"},children:e.invoice_num}),e.invoice_detials.invoice_dt,e.invoice_detials.invoice_currency,e.invoice_detials.final_bal_due,e.invoice_detials.due_date,{token:n,id:e._id,bill:e})})))}),[t,n]);return Object(a.useEffect)((function(){return console.log(Se(F,ke(m,O)).slice(v*P,v*P+P))}),[F,O,v,P,m]),Object(S.jsx)("div",{style:{margin:"10px",marginInline:"30px"},children:Object(S.jsx)(ce.a,{className:i.paper,children:Object(S.jsxs)(te.a,{children:[Object(S.jsxs)(d.a,{className:i.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table",children:[Object(S.jsx)(R,{classes:i,order:m,orderBy:O,onRequestSort:function(e,t){p(O===t&&"asc"===m?"desc":"asc"),x(t)}}),Object(S.jsx)(u.a,{children:Se(F,ke(m,O)).slice(v*P,v*P+P).map((function(e,t){var n="enhanced-table-checkbox-".concat(t);return Object(S.jsxs)(b.a,{hover:!0,tabIndex:-1,children:[Object(S.jsx)(j.a,{component:"th",id:n,scope:"row",style:{paddingLeft:"10px"},children:e.invoice}),Object(S.jsx)(j.a,{align:"right",children:e.invoice_date}),Object(S.jsx)(j.a,{align:"right",children:e.currency}),Object(S.jsx)(j.a,{align:"right",children:we(parseFloat(e.due_amount).toFixed(2))}),Object(S.jsx)(j.a,{align:"right",children:e.due_date}),o?"":Object(S.jsxs)(j.a,{align:"right",children:[Object(S.jsx)(_e,{token:e.payBill.token,id:e.payBill.id,bill:e.payBill.bill})," "]})]},t)}))})]}),Object(S.jsx)(ne.a,{rowsPerPageOptions:[5,10,25],component:"div",count:F.length,rowsPerPage:P,page:v,onChangePage:function(e,t){y(t)},onChangeRowsPerPage:function(e){C(parseInt(e.target.value,10)),y(0)}})]})})})}var Ce=function(e){var t,n,a=(e=e.toString()).indexOf(".");if(a>=0?(t=e.slice(0,a),n=e.slice(a)):(t=e,n=""),t.length>3){for(var c=t.slice(0,t.length-3)+","+t.slice(t.length-3),o=2;c.length-4-o>0;o+=3)c=c.slice(0,c.length-4-o)+","+c.slice(c.length-4-o);return c+n}return e},Be=function(e){var t=e.userID,n=e.token,c=e.toggleView,o=Object(a.useState)({}),i=Object(l.a)(o,2),s=i[0],d=i[1],u=Object(a.useState)([]),j=Object(l.a)(u,2),h=j[0],b=j[1],m=Object(a.useState)([]),p=Object(l.a)(m,2),f=p[0],g=p[1],O=Object(a.useState)(!1),x=Object(l.a)(O,2),_=x[0],w=x[1],y=Object(a.useState)(!1),k=Object(l.a)(y,2),T=k[0],P=k[1],C=Object(a.useState)({}),D=Object(l.a)(C,2),F=D[0],N=D[1],E=Object(a.useState)({}),R=Object(l.a)(E,2),I=R[0],A=R[1],U=Object(a.useState)([]),L=Object(l.a)(U,2),M=L[0],z=L[1],q=Object(a.useState)([]),Y=Object(l.a)(q,2),G=Y[0],H=Y[1];Object(a.useEffect)((function(){V(),J(),K(),X()}),[]);var V=function(){W.a.get(t?"http://".concat(window.location.host,"/invoices/userReceipts/").concat(t):"http://".concat(window.location.host,"/invoices/userReceipts/:id"),{headers:{token:n}}).then((function(e){return e.data})).then((function(e){d(e.user),b(e.receipts),e.haveReceipts&&P(!0)})).catch((function(e){window.alert("some error occured check console"),console.log(e)}))},J=function(){W.a.get(t?"http://".concat(window.location.host,"/invoices/userBills/").concat(t):"http://".concat(window.location.host,"/invoices/userBills/:id"),{headers:{token:n}}).then((function(e){return e.data})).then((function(e){g(e.bills),e.haveBills&&w(!0)})).catch((function(e){window.alert("some error occured check console"),console.log(e)}))},K=function(){W.a.get(t?"http://".concat(window.location.host,"/invoices/userReceiptsYTD/").concat(t):"http://".concat(window.location.host,"/invoices/userReceiptsYTD/:id"),{headers:{token:n}}).then((function(e){return e.data})).then((function(e){e.user&&d(e.user),e.total&&N(e.total),e.currencies&&H(e.currencies),e.message&&window.alert(e.message)})).catch((function(e){window.alert("some error occured check console"),console.log(e)}))},X=function(){W.a.get(t?"http://".concat(window.location.host,"/invoices/userBillsYTD/").concat(t):"http://".concat(window.location.host,"/invoices/userBillsYTD/:id"),{headers:{token:n}}).then((function(e){return e.data})).then((function(e){e.user&&d(e.user),e.total&&A(e.total),e.currencies&&z(e.currencies),e.message&&window.alert(e.message)})).catch((function(e){window.alert("some error occured check console"),console.log(e)}))};return Object(S.jsxs)(r.a,{children:[Object(S.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:[Object(S.jsx)("b",{children:"Invoice Total:"})," ",M.length?M.map((function(e){return Object(S.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:[e," : ",e+" "+Ce(I[e].toFixed(2))]})})):0]}),Object(S.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:[Object(S.jsx)("b",{children:"YTD Total Paid:"})," ",G.length?G.map((function(e){return Object(S.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:[e," : ",e+" "+Ce(F[e].toFixed(2))]})})):0]}),Object(S.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"h6",component:"h2",align:"left",gutterBottom:!0,children:[Object(S.jsx)("b",{children:"Pending Invoices "})," ",t&&" of :"+s.name]}),_?Object(S.jsx)(Pe,{token:n,rows_data:f}):Object(S.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:[t?"User":"You"," has no pending bills"]}),Object(S.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"h6",component:"h2",align:"left",gutterBottom:!0,children:[Object(S.jsx)("b",{children:"Paid Invoices"})," ",t&&" of :"+s.name]}),T?Object(S.jsx)(he,{rows_data:h,inAdmin:!0}):Object(S.jsx)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:"User has no receipts"}),t&&Object(S.jsx)(B.a,{align:"center",children:Object(S.jsx)(v.a,{onClick:c,variant:"contained",color:"primary",style:{marginRight:"10px"},children:Object(S.jsx)(ee.a,{style:{fontSize:"30px"}})})})]})},De=n(11),Fe=function(){var e=localStorage.getItem("token"),t=Object(a.useState)([]),n=Object(l.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),p=s[0],f=s[1],g=Object(a.useState)(!0),O=Object(l.a)(g,2),x=O[0],_=O[1],w=Object(a.useState)(null),v=Object(l.a)(w,2),y=v[0],k=v[1];Object(a.useEffect)((function(){e?(De.get("http://".concat(window.location.host,"/users/single_user"),{headers:{token:e}}).then((function(e){f(e.data.name)})).catch((function(e){window.alert("some error occured check console"),console.log(e)})),De.get("http://".concat(window.location.host,"/users/all_users"),{headers:{token:e}}).then((function(e){o(e.data)})).catch((function(e){window.alert("some error occured please check console"),console.log(e)}))):window.alert("You are not logged in")}),[e]);var T=function(e){k(e),_(!1)};return Object(S.jsxs)(r.a,{children:[Object(S.jsx)(Z,{username:p,token:e}),x?Object(S.jsxs)("div",{children:[Object(S.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h2",align:"center",gutterBottom:!0,children:"Admin Dashboard"}),Object(S.jsx)(D.a,{children:Object(S.jsx)(m.a,{style:{overflow:"auto",margin:"7px",marginTop:0,border:"1.5px solid rgb(243, 243, 243)",borderBottom:0},children:Object(S.jsxs)(d.a,{children:[Object(S.jsx)(h.a,{children:Object(S.jsxs)(b.a,{children:[Object(S.jsx)(j.a,{children:Object(S.jsx)("b",{children:"User Name"})}),Object(S.jsx)(j.a,{children:Object(S.jsx)("b",{children:"Email"})}),Object(S.jsx)(j.a,{children:Object(S.jsx)("b",{children:"Approval"})}),Object(S.jsx)(j.a,{children:Object(S.jsx)("b",{children:"Role"})}),Object(S.jsx)(j.a,{style:{textAlign:"center"},children:Object(S.jsx)("b",{children:"Payments"})}),Object(S.jsx)(j.a,{style:{textAlign:"center"},children:Object(S.jsx)("b",{children:"Delete User"})})]})}),Object(S.jsx)(u.a,{children:c.map((function(t){return Object(S.jsx)(C,{token:e,user:t,getReceipts:T},t._id)}))})]})})})]}):Object(S.jsx)(Be,{userID:y,token:e,toggleView:function(){_(!0)}})]})},Ne=n(222),Ee=n(233),Re=n(228),Ie=n(223),Ae=n(38),Ue=n.n(Ae),We=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),r=i[0],s=i[1];return Object(S.jsx)(Ne.a,{children:Object(S.jsxs)(ce.a,{elevation:10,style:{padding:20,width:280,margin:"20px auto"},children:[Object(S.jsxs)(Ne.a,{align:"center",children:[Object(S.jsx)(Ee.a,{style:{backgroundColor:"rgb(63, 81, 181)"},children:Object(S.jsx)(Ue.a,{style:{backgroundColor:"rgb(51, 70, 176)"}})}),Object(S.jsx)("h2",{style:{marginTop:"20px"},children:"Login"})]}),Object(S.jsx)(Re.a,{label:"Email",placeholder:"Enter Email",fullWidth:!0,required:!0,value:n,style:{marginTop:"20px"},onChange:function(e){c(e.target.value)}}),Object(S.jsx)(Re.a,{label:"Password",placeholder:"Enter password",type:"password",fullWidth:!0,required:!0,style:{marginTop:"7px"},value:r,onChange:function(e){s(e.target.value)}}),Object(S.jsx)(v.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"45px"},fullWidth:!0,onClick:function(){W.a.post("http://".concat(window.location.host,"/users/login"),{email:n,password:r}).then((function(e){return e.data})).then((function(e){400===e.status?(console.log(e),window.alert(e.message)):(localStorage.setItem("token",e.token),localStorage.setItem("user",e.user),e.user.isAdmin?window.location.replace("http://".concat(window.location.host,"/dashboard")):e.user.approved?window.location.replace("http://".concat(window.location.host,"/userPage")):window.location.replace("http://".concat(window.location.host,"/unapproved")))})).catch((function(e){window.alert("some error occured please check console"),console.log(e)}))},children:"Log in"}),Object(S.jsxs)(B.a,{style:{marginTop:"5px"},children:[" ","New here? ",Object(S.jsx)(Ie.a,{href:"/register",children:"Register"})]}),Object(S.jsxs)(B.a,{children:[" ","Forgot password? ",Object(S.jsx)(Ie.a,{href:"/forgotPassword",children:"Click here"})]})]})})},Le=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(""),r=Object(l.a)(i,2),s=r[0],d=r[1],u=Object(a.useState)(""),j=Object(l.a)(u,2),h=j[0],b=j[1],m=Object(a.useState)(""),p=Object(l.a)(m,2),f=p[0],g=p[1];return Object(S.jsx)(c.a.Fragment,{children:Object(S.jsx)(Ne.a,{children:Object(S.jsxs)(ce.a,{elevation:10,style:{padding:20,width:280,margin:"20px auto"},children:[Object(S.jsxs)(Ne.a,{align:"center",children:[Object(S.jsx)(Ee.a,{style:{backgroundColor:"rgb(63, 81, 181)"},children:Object(S.jsx)(Ue.a,{})}),Object(S.jsx)("h2",{style:{marginTop:"20px"},children:"Register"})]}),Object(S.jsx)(Re.a,{label:"Name",placeholder:"Enter Name",fullWidth:!0,required:!0,value:n,style:{marginTop:"15px"},onChange:function(e){o(e.target.value)}}),Object(S.jsx)(Re.a,{label:"Email",placeholder:"Enter Email",fullWidth:!0,required:!0,value:f,onChange:function(e){g(e.target.value)}}),Object(S.jsx)(Re.a,{label:"Password",placeholder:"Enter password",type:"password",fullWidth:!0,required:!0,value:s,onChange:function(e){d(e.target.value)}}),Object(S.jsx)(Re.a,{label:"Confrim password",placeholder:"Re-enter password",type:"password",fullWidth:!0,required:!0,value:h,onChange:function(e){b(e.target.value)}}),Object(S.jsx)(v.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"50px"},fullWidth:!0,onClick:function(){s.length<6?window.alert("Password length should be more than 6"):h===s&&n.length&&f.length?W.a.post("http://".concat(window.location.host,"/users/register"),{name:n,email:f,password:s}).then((function(e){200===e.data.status?(window.alert("Registered sucessfully"),window.alert(e.data.message),window.location.replace("http://".concat(window.location.host,"/login"))):400===e.data.status?e.data.message&&(window.alert(e.data.message),window.location.reload()):(window.alert("Some error occured. check console."),console.log(e.data))})).catch((function(e){window.alert("some error occured please check console"),console.log(e)})):window.alert("Passwords don't match")},children:"Register"}),Object(S.jsxs)(B.a,{style:{marginTop:"5px"},children:[" ","Have an account?",Object(S.jsx)(Ie.a,{href:"/login",children:" Login"})]})]})})})},Me=Object(p.a)({container:{display:"flex",flexDirection:"column"},login:{margin:"50px"},register:{margin:"0 50px"}}),ze=function(){var e=Me();return Object(S.jsx)(c.a.Fragment,{children:Object(S.jsxs)(D.a,{className:e.container,maxWidth:"xs",children:[Object(S.jsx)(v.a,{className:e.login,variant:"contained",color:"primary",href:"/login",children:"Login"}),Object(S.jsx)(v.a,{className:e.register,variant:"contained",color:"primary",href:"/register",children:"Register"})]})})},qe=function(){return Object(S.jsx)("h1",{children:"not found"})},Ye=Object(p.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}})),Ge=function(){var e=Ye();return Object(S.jsxs)(r.a,{children:[Object(S.jsx)("div",{className:e.root,children:Object(S.jsx)(F.a,{position:"static",style:{marginBottom:"5px"},children:Object(S.jsxs)(N.a,{children:[Object(S.jsx)(x.a,{href:"/",edge:"start",className:e.menuButton,color:"inherit","aria-label":"home",children:Object(S.jsx)(R.a,{})}),Object(S.jsx)(B.a,{variant:"h6",className:e.title,children:"Payment Management Service"}),Object(S.jsx)("div",{children:Object(S.jsx)(v.a,{className:e.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",href:"/login",children:"Log In"})})]})})}),Object(S.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h2",align:"center",gutterBottom:!0,children:"You are not approved by the admin"})]})},He=function(e){var t=e.token;return Object(S.jsx)(v.a,{style:{margin:20},variant:"contained",color:"primary",onClick:function(){window.location.replace("http://".concat(window.location.host,"/resetPassword/").concat(t))},children:"Reset Password"})},Ve=Object(p.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}}));function Je(e){var t=e.username,n=e.token,a=Ve(),o=c.a.useState(null),i=Object(l.a)(o,2),r=i[0],s=i[1];return Object(S.jsx)("div",{className:a.root,children:Object(S.jsx)(F.a,{position:"static",style:{marginBottom:"5px"},children:Object(S.jsxs)(N.a,{children:[Object(S.jsx)(x.a,{href:"/",edge:"start",className:a.menuButton,color:"inherit","aria-label":"home",children:Object(S.jsx)(R.a,{})}),Object(S.jsx)(B.a,{variant:"h6",className:a.title,children:"Payment management service"}),Object(S.jsxs)("div",{children:[Object(S.jsx)(He,{token:n}),Object(S.jsxs)(v.a,{className:a.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:[t,Object(S.jsx)("span",{className:"material-icons-outlined",children:"expand_more"})]}),Object(S.jsx)(I.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){s(null)},children:Object(S.jsx)(f.a,{onClick:function(){localStorage.removeItem("token"),window.location.replace("http://".concat(window.location.host))},children:"Logout"})})]})]})})})}var Ke=n(11),Xe=function(){var e=localStorage.getItem("token"),t=Object(a.useState)({}),n=Object(l.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){e?Ke.get("http://".concat(window.location.host,"/users/single_user"),{headers:{token:e}}).then((function(e){o(e.data)})).catch((function(e){window.alert("some error occured please check console"),console.log(e)})):window.alert("You are not logged in")}),[e]),Object(S.jsxs)(r.a,{children:[Object(S.jsx)(Je,{username:c.name,token:e}),Object(S.jsx)(Be,{token:e})]})},Qe=function(e){var t=e.match.params.token,n=Object(a.useState)(""),c=Object(l.a)(n,2),o=c[0],i=c[1];return Object(S.jsx)(Ne.a,{children:Object(S.jsxs)(ce.a,{elevation:10,style:{padding:20,height:"70vh",width:280,margin:"20px auto"},children:[Object(S.jsxs)(Ne.a,{align:"center",children:[Object(S.jsx)(Ee.a,{style:{backgroundColor:"rgb(51, 70, 176)"},children:Object(S.jsx)(Ue.a,{style:{backgroundColor:"rgb(51, 70, 176)"}})}),Object(S.jsx)("h2",{style:{marginTop:"20px"},children:"Reset Password"})]}),Object(S.jsx)(Re.a,{label:"New Password",placeholder:"Enter new password",type:"password",fullWidth:!0,required:!0,style:{marginTop:"7px"},value:o,onChange:function(e){i(e.target.value)}}),Object(S.jsx)(v.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"68px"},fullWidth:!0,onClick:function(){o.length<6?window.alert("Password should be more than 6"):W.a.put("http://".concat(window.location.host,"/users/changePassword"),{password:o},{headers:{token:t}}).then((function(e){return e.data})).then((function(e){400===e.status?window.alert(e.message):(window.alert(e.message),window.location.replace("http://".concat(window.location.host,"/login")))})).catch((function(e){console.log(e)}))},children:"Reset"})]})})},Ze=Object(p.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}})),$e=function(e){var t=e.match.params.token,n=Ze();Object(a.useEffect)((function(){c()}),[]);var c=function(){W.a.get("http://".concat(window.location.host,"/users/verifyUser/").concat(t)).then((function(e){return e.data})).then((function(e){400===e.status?window.alert(e.message):(window.alert(e.message),window.location.replace("http://".concat(window.location.host,"/login")))})).catch((function(e){window.alert("some error occured please check console"),console.log(e)}))};return Object(S.jsxs)(r.a,{children:[Object(S.jsx)("div",{className:n.root,children:Object(S.jsx)(F.a,{position:"static",style:{marginBottom:"5px"},children:Object(S.jsxs)(N.a,{children:[Object(S.jsx)(x.a,{href:"/",edge:"start",className:n.menuButton,color:"inherit","aria-label":"home",children:Object(S.jsx)(R.a,{})}),Object(S.jsx)(B.a,{variant:"h6",className:n.title,children:"Payment management service"}),Object(S.jsx)("div",{children:Object(S.jsx)(v.a,{className:n.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",href:"/login",children:"Log In"})})]})})}),Object(S.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h2",align:"center",gutterBottom:!0,children:"You have been verified"})]})},et=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(S.jsx)(Ne.a,{children:Object(S.jsxs)(ce.a,{elevation:10,style:{padding:20,height:"70vh",width:280,margin:"20px auto"},children:[Object(S.jsxs)(Ne.a,{align:"center",children:[Object(S.jsx)(Ee.a,{style:{backgroundColor:"rgb(51, 70, 176)"},children:Object(S.jsx)(Ue.a,{style:{backgroundColor:"rgb(51, 70, 176)"}})}),Object(S.jsx)("h2",{style:{marginTop:"20px"},children:"Forgot Password"})]}),Object(S.jsx)(Re.a,{label:"Email",placeholder:"Enter Email",type:"Email",fullWidth:!0,required:!0,style:{marginTop:"7px"},value:n,onChange:function(e){c(e.target.value)}}),Object(S.jsx)(v.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"68px"},fullWidth:!0,onClick:function(){W.a.put("http://".concat(window.location.host,"/users/forgotPassword/").concat(n)).then((function(e){return e.data})).then((function(e){400===e.status?window.alert(e.message):(window.alert(e.message),window.location.replace("http://".concat(window.location.host,"/login")))})).catch((function(e){window.alert("some error occured please check console"),console.log(e)}))},children:"Send mail"})]})})},tt=n(11),nt=function(){var e=localStorage.getItem("token"),t=Object(a.useState)({}),n=Object(l.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){e?tt.get("http://".concat(window.location.host,"/users/single_user"),{headers:{token:e}}).then((function(e){o(e.data)})).catch((function(e){window.alert("some error occured please check console"),console.log(e)})):window.alert("You are not logged in")}),[e]),Object(S.jsxs)(r.a,{children:[Object(S.jsx)(Z,{username:c.name,token:e}),Object(S.jsx)(He,{token:e})]})},at=function(){return Object(S.jsx)(r.a,{children:Object(S.jsxs)(s.c,{children:[Object(S.jsx)(s.a,{exact:!0,path:"/",component:ze}),Object(S.jsx)(s.a,{exact:!0,path:"/dashboard",component:Fe}),Object(S.jsx)(s.a,{exact:!0,path:"/login",component:We}),Object(S.jsx)(s.a,{exact:!0,path:"/register",component:Le}),Object(S.jsx)(s.a,{exact:!0,path:"/unapproved",component:Ge}),Object(S.jsx)(s.a,{exact:!0,path:"/userPage",component:Xe}),Object(S.jsx)(s.a,{exact:!0,path:"/myAccount",component:nt}),Object(S.jsx)(s.a,{exact:!0,path:"/forgotPassword",component:et}),Object(S.jsx)(s.a,{path:"/resetPassword/:token",component:Qe}),Object(S.jsx)(s.a,{path:"/verifyUser/:token",component:$e}),Object(S.jsx)(s.a,{component:qe})]})})};i.a.render(Object(S.jsx)(at,{}),document.getElementById("root"))}},[[173,1,2]]]);
//# sourceMappingURL=main.65deefcd.chunk.js.map