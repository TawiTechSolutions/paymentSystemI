(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{107:function(e,t){},168:function(e,t){},169:function(e,t){},170:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(14),o=n.n(i),r=n(16),s=n(15),l=n(4),d=n(208),u=n(209),j=n(200),h=n(206),b=n(198),m=n(220),p=n(196),f=n(226),O=n(202),g=n(222),x=n(205),_=n(112),v=n.n(_),w=n(201),y=n(111),S=n.n(y),k=n(1),T=n(11),C=Object(p.a)({table:{minWidth:650},TableRow:{TableCell:{color:"white"}}}),P=function(e){var t=e.user,n=e.token,c=e.getReceipts,i=C(),o=Object(a.useState)(t.isAdmin),r=Object(l.a)(o,2),s=r[0],d=r[1],u=Object(a.useState)(t.approved),h=Object(l.a)(u,2),m=h[0],p=h[1];return Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{style:{padding:"0 16px"},children:t.name}),Object(k.jsx)(j.a,{style:{padding:"0 16px"},children:t.email}),Object(k.jsx)(j.a,{style:{padding:"0 16px"},children:m?"Approved":Object(k.jsx)(w.a,{onClick:function(){!function(e){if(window.confirm("Apprrove? This action cannot be reversed")){p(!0);var a={name:t.name,email:t.email,password:t.password,isAdmin:t.isAdmin,approved:!0};T.put("http://localhost:5000/users/update/".concat(e),a,{headers:{token:n,"Content-Type":"application/json"}}).then((function(e){window.alert(e.data.message)})).catch((function(e){console.log(e)}))}}(t._id)},variant:"contained",color:"primary",children:"Approve"})}),Object(k.jsx)(j.a,{style:{padding:"0 16px"},children:Object(k.jsx)(O.a,{className:i.formControl,children:Object(k.jsxs)(g.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:s,onChange:function(e){!function(e,a){if(s)window.alert("Cannot change role of admin");else if(window.confirm("Make admin? After user is made admin you cannot change back")){d(a.target.value);var c={name:t.name,email:t.email,password:t.password,isAdmin:!0};T.put("http://localhost:5000/users/updateRole/".concat(e),c,{headers:{token:n,"Content-Type":"application/json"}}).then((function(e){window.alert(e.data.message)})).catch((function(e){console.log(e)}))}}(t._id,e)},children:[Object(k.jsx)(f.a,{value:!0,children:"Admin"}),Object(k.jsx)(f.a,{value:!1,children:"User"})]})})}),Object(k.jsx)(j.a,{style:{padding:"0 16px",textAlign:"center"},children:Object(k.jsx)(x.a,{onClick:function(){c(t._id)},"aria-label":"update",className:i.margin,children:Object(k.jsx)(S.a,{})})}),Object(k.jsx)(j.a,{style:{padding:"0 16px",textAlign:"center"},children:Object(k.jsx)(x.a,{onClick:function(){var e;e=t._id,window.confirm("Want to delete?")&&T.delete("http://localhost:5000/users/".concat(e),{headers:{token:n}}).then((function(e){window.alert(e.data.message),window.location.reload()})).catch((function(e){console.log(e)}))},"aria-label":"delete",className:i.margin,children:Object(k.jsx)(v.a,{})})})]})},B=n(88),N=n(211),D=n(11),E=n.n(D),F=n(113),R=n.n(F),I=n(207),A=n(223),U=n(227),W=n(173);var L=[{id:"invoice",numeric:!1,date:!1,disablePadding:!0,label:"Invoice"},{id:"invoice_date",numeric:!0,disablePadding:!1,label:"Invoice Date"},{id:"currency",numeric:!0,disablePadding:!1,label:"Currency"},{id:"due_amount",numeric:!0,disablePadding:!1,label:"Due Amount"},{id:"due_date",numeric:!0,disablePadding:!1,label:"Due Date"},{id:"amount_paid",numeric:!0,disablePadding:!1,label:"Amount Paid"},{id:"receipt",numeric:!0,disablePadding:!1,label:"Receipt"}],M=function(e){var t,n,a=(e=e.toString()).indexOf(".");if(a>=0?(t=e.slice(0,a),n=e.slice(a)):(t=e,n=""),t.length>3){for(var c=t.slice(0,t.length-3)+","+t.slice(t.length-3),i=2;c.length-4-i>0;i+=3)c=c.slice(0,c.length-4-i)+","+c.slice(c.length-4-i);return c+n}return e};function q(e,t,n){var a=new Date(t[n]).getTime(),c=new Date(e[n]).getTime();return a<c?-1:a>c?1:0}function G(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function z(e,t){return"invoice_date"===t||"due_date"===t?"desc"===e?function(e,n){return q(e,n,t)}:function(e,n){return-q(e,n,t)}:"desc"===e?function(e,n){return G(e,n,t)}:function(e,n){return-G(e,n,t)}}function Y(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function H(e){var t=e.classes,n=e.order,a=e.orderBy,c=e.onRequestSort;return Object(k.jsx)(h.a,{children:Object(k.jsx)(b.a,{children:L.map((function(e,i){return Object(k.jsx)(j.a,{align:e.numeric?"right":"left",sortDirection:a===e.id&&n,style:{paddingLeft:"10px"},children:Object(k.jsxs)(U.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(o=e.id,function(e){c(e,o)}),children:[Object(k.jsxs)("b",{children:[" ",e.label]}),a===e.id?Object(k.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id+i);var o}))})})}var V=Object(p.a)((function(e){return{paper:{marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function J(e){var t=e.rows_data,n=e.inAdmin,i=V(),o=c.a.useState("asc"),r=Object(l.a)(o,2),s=r[0],h=r[1],m=c.a.useState("invoice_date"),p=Object(l.a)(m,2),f=p[0],O=p[1],g=c.a.useState(0),x=Object(l.a)(g,2),_=x[0],v=x[1],w=c.a.useState(5),y=Object(l.a)(w,2),S=y[0],T=y[1],C=c.a.useState([]),P=Object(l.a)(C,2),N=P[0],D=P[1];c.a.useEffect((function(){D(t.map((function(e){return function(e,t,n,a,c,i,o){return{invoice:e,invoice_date:t,currency:n,due_amount:a,due_date:c,amount_paid:i,receipt:o}}(e.bill_url?Object(k.jsx)("a",{style:{textDecoration:"none"},href:e.bill_url,children:e.invoice_num}):Object(k.jsx)("p",{style:{textDecoration:"none"},children:e.invoice_num}),e.invoice_detials.invoice_dt,e.invoice_detials.invoice_currency,e.invoice_detials.final_bal_due,e.invoice_detials.due_date,e.invoice_detials.final_bal_due,Object(k.jsx)("a",{style:{textDecoration:"none"},href:e.receipt_url,children:"R_"+e.invoice_num}))})))}),[t]);return Object(a.useEffect)((function(){return console.log(Y(N,z(s,f)).slice(_*S,_*S+S))}),[N,f,_,S,s]),Object(k.jsxs)("div",{style:{margin:"10px",marginInline:"30px"},children:[n?"":Object(k.jsx)(B.a,{style:{marginTop:"5px"},variant:"h6",component:"h6",align:"left",gutterBottom:!0,children:Object(k.jsx)("b",{children:" Paid Invoices"})}),Object(k.jsx)(W.a,{className:i.paper,children:Object(k.jsxs)(I.a,{children:[Object(k.jsxs)(d.a,{className:i.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table",children:[Object(k.jsx)(H,{classes:i,order:s,orderBy:f,onRequestSort:function(e,t){h(f===t&&"asc"===s?"desc":"asc"),O(t)}}),Object(k.jsx)(u.a,{children:Y(N,z(s,f)).slice(_*S,_*S+S).map((function(e,t){var n="enhanced-table-checkbox-".concat(t);return Object(k.jsxs)(b.a,{hover:!0,tabIndex:-1,children:[Object(k.jsx)(j.a,{component:"th",id:n,scope:"row",style:{paddingLeft:"10px"},children:e.invoice}),Object(k.jsx)(j.a,{align:"right",children:e.invoice_date}),Object(k.jsx)(j.a,{align:"right",children:e.currency}),Object(k.jsx)(j.a,{align:"right",children:M(e.due_amount)}),Object(k.jsx)(j.a,{align:"right",children:e.due_date}),Object(k.jsx)(j.a,{align:"right",children:M(e.amount_paid)}),Object(k.jsx)(j.a,{align:"right",children:e.receipt})]},t)}))})]}),Object(k.jsx)(A.a,{rowsPerPageOptions:[5,10,25],component:"div",count:N.length,rowsPerPage:S,page:_,onChangePage:function(e,t){v(t)},onChangeRowsPerPage:function(e){T(parseInt(e.target.value,10)),v(0)}})]})})]})}var K=[{id:"invoice",numeric:!1,date:!1,disablePadding:!0,label:"Invoice"},{id:"invoice_date",numeric:!0,disablePadding:!1,label:"Invoice Date"},{id:"currency",numeric:!0,disablePadding:!1,label:"Currency"},{id:"due_amount",numeric:!0,disablePadding:!1,label:"Due Amount"},{id:"due_date",numeric:!0,disablePadding:!1,label:"Due Date"}],Q=function(e){var t,n,a=(e=e.toString()).indexOf(".");if(a>=0?(t=e.slice(0,a),n=e.slice(a)):(t=e,n=""),t.length>3){for(var c=t.slice(0,t.length-3)+","+t.slice(t.length-3),i=2;c.length-4-i>0;i+=3)c=c.slice(0,c.length-4-i)+","+c.slice(c.length-4-i);return c+n}return e};function X(e,t,n){var a=new Date(t[n]).getTime(),c=new Date(e[n]).getTime();return a<c?-1:a>c?1:0}function Z(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function $(e,t){return"invoice_date"===t||"due_date"===t?"desc"===e?function(e,n){return X(e,n,t)}:function(e,n){return-X(e,n,t)}:"desc"===e?function(e,n){return Z(e,n,t)}:function(e,n){return-Z(e,n,t)}}function ee(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}function te(e){var t=e.classes,n=e.order,a=e.orderBy,c=e.onRequestSort;return Object(k.jsx)(h.a,{children:Object(k.jsx)(b.a,{children:K.map((function(e,i){return Object(k.jsx)(j.a,{align:e.numeric?"right":"left",sortDirection:a===e.id&&n,style:{paddingLeft:"10px"},children:Object(k.jsxs)(U.a,{active:a===e.id,direction:a===e.id?n:"asc",onClick:(o=e.id,function(e){c(e,o)}),children:[Object(k.jsxs)("b",{children:[" ",e.label]}),a===e.id?Object(k.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id+i);var o}))})})}var ne=Object(p.a)((function(e){return{paper:{marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ae(e){var t=e.rows_data,n=e.inAdmin,i=ne(),o=c.a.useState("asc"),r=Object(l.a)(o,2),s=r[0],h=r[1],m=c.a.useState("invoice_date"),p=Object(l.a)(m,2),f=p[0],O=p[1],g=c.a.useState(0),x=Object(l.a)(g,2),_=x[0],v=x[1],w=c.a.useState(5),y=Object(l.a)(w,2),S=y[0],T=y[1],C=c.a.useState([]),P=Object(l.a)(C,2),N=P[0],D=P[1];c.a.useEffect((function(){D(t.map((function(e){return t=e.bill_url?Object(k.jsx)("a",{style:{textDecoration:"none"},href:e.bill_url,children:e.invoice_num}):Object(k.jsx)("p",{style:{textDecoration:"none"},children:e.invoice_num}),n=e.invoice_detials.invoice_dt,a=e.invoice_detials.invoice_currency,c=e.invoice_detials.final_bal_due,i=e.invoice_detials.due_date,{invoice:t,invoice_date:n,currency:a,due_amount:c,due_date:i};var t,n,a,c,i})))}),[t]);return Object(a.useEffect)((function(){return console.log(ee(N,$(s,f)).slice(_*S,_*S+S))}),[N,f,_,S,s]),Object(k.jsxs)("div",{style:{margin:"10px",marginInline:"30px"},children:[n?"":Object(k.jsx)(B.a,{style:{marginTop:"5px"},variant:"h6",component:"h6",align:"left",gutterBottom:!0,children:Object(k.jsx)("b",{children:" Unpaid Invoices"})}),Object(k.jsx)(W.a,{className:i.paper,children:Object(k.jsxs)(I.a,{children:[Object(k.jsxs)(d.a,{className:i.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table",children:[Object(k.jsx)(te,{classes:i,order:s,orderBy:f,onRequestSort:function(e,t){h(f===t&&"asc"===s?"desc":"asc"),O(t)}}),Object(k.jsx)(u.a,{children:ee(N,$(s,f)).slice(_*S,_*S+S).map((function(e,t){var n="enhanced-table-checkbox-".concat(t);return Object(k.jsxs)(b.a,{hover:!0,tabIndex:-1,children:[Object(k.jsx)(j.a,{component:"th",id:n,scope:"row",style:{paddingLeft:"10px"},children:e.invoice}),Object(k.jsx)(j.a,{align:"right",children:e.invoice_date}),Object(k.jsx)(j.a,{align:"right",children:e.currency}),Object(k.jsx)(j.a,{align:"right",children:Q(e.due_amount)}),Object(k.jsx)(j.a,{align:"right",children:e.due_date})]},t)}))})]}),Object(k.jsx)(A.a,{rowsPerPageOptions:[5,10,25],component:"div",count:N.length,rowsPerPage:S,page:_,onChangePage:function(e,t){v(t)},onChangeRowsPerPage:function(e){T(parseInt(e.target.value,10)),v(0)}})]})})]})}var ce=n(228),ie=function(e){var t=e.userID,n=e.token,c=e.toggleView,i=Object(a.useState)({}),o=Object(l.a)(i,2),s=o[0],d=o[1],u=Object(a.useState)([]),j=Object(l.a)(u,2),h=j[0],b=j[1],m=Object(a.useState)([]),p=Object(l.a)(m,2),O=p[0],x=p[1],_=Object(a.useState)(!1),v=Object(l.a)(_,2),y=v[0],S=v[1],T=Object(a.useState)(!1),C=Object(l.a)(T,2),P=C[0],N=C[1],D=Object(a.useState)(0),F=Object(l.a)(D,2),I=F[0],A=(F[1],Object(a.useState)(0)),U=Object(l.a)(A,2),W=U[0],L=(U[1],Object(a.useState)("INR")),M=Object(l.a)(L,2),q=M[0],G=M[1];Object(a.useEffect)((function(){z(),Y()}),[]);var z=function(){E.a.get(t?"http://localhost:5000/invoices/userReceipts/".concat(t):"http://localhost:5000/invoices/userReceipts/:id",{headers:{token:n}}).then((function(e){return e.data})).then((function(e){d(e.user),b(e.receipts),e.haveReceipts&&N(!0)})).catch((function(e){window.alert("some error occured check console"),console.log(e)}))},Y=function(){E.a.get(t?"http://localhost:5000/invoices/userBills/".concat(t):"http://localhost:5000/invoices/userBills/:id",{headers:{token:n}}).then((function(e){return e.data})).then((function(e){x(e.bills),e.haveBills&&S(!0)})).catch((function(e){window.alert("some error occured check console"),console.log(e)}))};return Object(k.jsxs)(r.a,{children:[Object(k.jsx)(ce.a,{id:"demo-simple-select-label",children:"Currency"}),Object(k.jsxs)(g.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:q,onChange:function(e){G(e.target.value)},children:[Object(k.jsx)(f.a,{value:"INR",children:"INR"}),Object(k.jsx)(f.a,{value:"EUR",children:"EUR"}),Object(k.jsx)(f.a,{value:"USD",children:"USD"}),Object(k.jsx)(f.a,{value:"GBP",children:"GBP"}),Object(k.jsx)(f.a,{value:"AED",children:"AED"})]}),Object(k.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:[Object(k.jsx)("b",{children:"Invoice Total:"})," ",W]}),Object(k.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:[Object(k.jsx)("b",{children:"YTD Total Paid:"})," ",Math.round(100*I)/100]}),Object(k.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"h6",component:"h2",align:"left",gutterBottom:!0,children:[Object(k.jsx)("b",{children:"Pending Invoices:"})," ",s.name]}),y?Object(k.jsx)(ae,{rows_data:O}):Object(k.jsx)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:"User has no pending bills"}),Object(k.jsxs)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"h6",component:"h2",align:"left",gutterBottom:!0,children:[Object(k.jsx)("b",{children:"Paid Invoices of :"})," ",s.name]}),P?Object(k.jsx)(J,{rows_data:h,inAdmin:!0}):Object(k.jsx)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:"User has no receipts"}),Object(k.jsx)(B.a,{align:"center",children:Object(k.jsx)(w.a,{onClick:c,variant:"contained",color:"primary",style:{marginRight:"10px"},children:Object(k.jsx)(R.a,{style:{fontSize:"30px"}})})})]})},oe=n(217),re=n(210),se=n(37),le=n.n(se),de=n(114),ue=n(33),je=n(215),he=function(e){var t=e.data,n=e.coloum_names,a=e.colour;return Object(k.jsx)(b.a,{style:{backgroundColor:a||""},children:n.map((function(e,n){return!!e.name&&Object(k.jsx)(j.a,{children:t[e.name]||0===t[e.name]?t[e.name].toString():""},n)}))})},be=function(e){var t=e.data,n=e.errors,c=Object(a.useState)([]),i=Object(l.a)(c,2),o=i[0],s=i[1];return Object(a.useEffect)((function(){for(var e=[],n=0,a=Object.entries(t[0]);n<a.length;n++){var c=Object(l.a)(a[n],2),i=c[0],o=c[1];e.push({name:i,value:o})}s(e)}),[t]),Object(k.jsx)(r.a,{children:Object(k.jsx)(N.a,{children:Object(k.jsx)(m.a,{style:{overflow:"auto",margin:"7px",marginTop:0,border:"1.5px solid rgb(243, 243, 243)",borderBottom:0},children:Object(k.jsxs)(d.a,{size:"small",children:[Object(k.jsx)(h.a,{children:Object(k.jsx)(b.a,{children:o.map((function(e,t){return!!e.name&&Object(k.jsx)(j.a,{children:Object(k.jsx)("b",{children:e.name})},t)}))})}),Object(k.jsx)(u.a,{children:t.map((function(e,t){return Object(k.jsx)(he,{data:e,coloum_names:o,colour:n[t]?n[t]:""},t)}))})]})})})})},me=n(224),pe=n(216),fe=n(213),Oe=n(214),ge=n(212);var xe=function(e){var t=e.token,n=Object(a.useState)(!1),i=Object(l.a)(n,2),o=i[0],r=i[1],s=Object(a.useState)([]),d=Object(l.a)(s,2),u=d[0],j=d[1],h=Object(a.useState)([]),b=Object(l.a)(h,2),m=b[0],p=b[1],f=Object(a.useState)({}),O=Object(l.a)(f,2),g=O[0],x=O[1],_=Object(a.useState)(!1),v=Object(l.a)(_,2),y=v[0],S=v[1],T=Object(a.useState)(!1),C=Object(l.a)(T,2),P=C[0],N=C[1],D=Object(a.useState)(0),F=Object(l.a)(D,2),R=F[0],I=F[1],A=Object(a.useState)([]),U=Object(l.a)(A,2),W=U[0],L=U[1],M=Object(a.useState)([]),q=Object(l.a)(M,2),G=q[0],z=q[1],Y=Object(a.useState)([]),H=Object(l.a)(Y,2),V=H[0],J=H[1],K=Object(a.useState)([]),Q=Object(l.a)(K,2),X=Q[0],Z=Q[1],$=Object(a.useState)({}),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)({}),ce=Object(l.a)(ae,2),ie=ce[0],oe=ce[1],re=Object(a.useState)(!1),se=Object(l.a)(re,2),le=se[0],de=se[1],he=function(){r(!1)},xe=function(e){var t=new FileReader;t.onload=function(e){!function(e){var t=ue.read(e,{type:"binary",cellDates:!0,cellNF:!1,cellText:!1}),n={};t.SheetNames.forEach((function(e){var a=ue.utils.sheet_to_row_object_array(t.Sheets[e]);console.log("sheetNames",t.SheetNames),n[e]=a})),j(n.cust_data),p(n.solutions_owner_data),x(n),S(!0)}(e.target.result)},t.readAsBinaryString(e)};return Object(a.useEffect)((function(){var e=!0;if(y){if(u.length){for(var t=[],n=["cust_id","cust_tax_id","cust_pan","cust_firm","cust_keyman","cust_email","cust_ph_isd","cust_ph_num","cust_add_cntry","cust_add_zip","cust_add_state","cust_add_city","cust_add_landmark","cust_add_street","invoice_dt","invoice_num","invoice_currency","invoice_amt","discount","email_dt","desc","TDS","GST","due_date","reminder_1","reminder_2","final_bal_due","email_dt","paid","nonSystem_payment_method","Shown_in_System_Fag","nonSystem_payment_date","nonSystem_payment_amt"],a=0;a<u.length;a++){for(var c=[],i=0,o=Object.entries(u[a]);i<o.length;i++){var r=Object(l.a)(o[i],2),s=r[0],d=r[1];c.push(s),d||0!==d&&(e=!1,t.push({row:a,cloumn_name:s}))}for(var j=0;j<n.length;j++){for(var h=!1,b=0;b<c.length;b++)c[b]===n[j]&&(h=!0);h||(e=!1,t.push({row:a,cloumn_name:n[j]}))}}L(t)}if(m.length){for(var p=[],f=["so_keyman","so_keyman_title","so_email","so_position","so_ph_isd","so_ph_num","so_add_cntry","so_add_zip","so_add_state","so_add_city","so_add_street","so_firm","so_firm_email","so_firm_acc_name","so_firm_acc_num","so_firm_ifsc","so_firm_swift","so_firm_ph_isd","so_firm_ph_num","so_firm_add_cntry","so_firm_add_zip","so_firm_add_state","so_firm_add_city","so_firm_add_street"],O=0;O<m.length;O++){for(var g=[],x=0,_=Object.entries(m[O]);x<_.length;x++){var v=Object(l.a)(_[x],2),w=v[0],S=v[1];g.push(w),S||0!==S&&(e=!1,p.push({row:O,cloumn_name:w}))}for(var k=0;k<f.length;k++){for(var T=!1,C=0;C<g.length;C++)g[C]===f[k]&&(T=!0);T||(e=!1,p.push({row:O,cloumn_name:f[k]}))}}z(p)}e?N(!0):window.alert("Missing Data in user data sheet. Fix it to send file")}}),[y,m,u]),Object(a.useEffect)((function(){for(var e=[],t=[],n=0;n<u.length;n++){for(var a={},c=0,i=Object.entries(u[n]);c<i.length;c++){var o=Object(l.a)(i[c],2),r=o[0],s=o[1];if("invoice_dt"===r||"cust_tax_id"===r||"cust_keyman"===r||"cust_email"===r||"cust_firm"===r||"invoice_num"===r||"invoice_currency"===r||"email_dt"===r||"final_bal_due"===r)if("final_bal_due"===r)a[r]=Math.round(100*s)/100;else if("email_dt"===r||"invoice_dt"===r){var d=new Date(s);a[r]=d.toDateString()}else a[r]=s}e.push(a)}for(var j=0;j<m.length;j++){for(var h={},b=0,p=Object.entries(m[j]);b<p.length;b++){var f=Object(l.a)(p[b],2),O=f[0],g=f[1];"so_keyman"!==O&&"so_email"!==O&&"so_firm_email"!==O&&"so_firm_email"!==O&&"so_firm_acc_name"!==O&&"so_firm_acc_num"!==O&&"so_firm_ifsc"!==O&&"so_firm_swift"!==O||(h[O]=g)}t.push(h)}J(e),Z(t)}),[m,u]),Object(a.useEffect)((function(){for(var e={},t=0;t<W.length;t++){[].includes(W[t].cloumn_name)&&(e[W[t].row]="#FF6666"),["invoice_dt","cust_tax_id","cust_keyman","cust_email","cust_firm","invoice_num","invoice_currency","email_dt","final_bal_due"].includes(W[t].cloumn_name)&&(de(!0),e[W[t].row]="#FFB266")}ne(e);for(var n={},a=0;a<G.length;a++){[].includes(G[a].cloumn_name)&&(n[G[a].row]="#FF6666"),["so_firm_acc_name","so_firm_acc_num","so_firm_ifsc","so_firm_swift"].includes(G[a].cloumn_name)&&(de(!0),n[G[a].row]="#FFB266")}oe(n)}),[W,G]),Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){r(!0)},style:{marginRight:"10px"},children:"Upload Invoices"}),Object(k.jsxs)(me.a,{fullWidth:!0,maxWidth:"xl",open:o,onClose:he,"aria-labelledby":"max-width-dialog-title",children:[Object(k.jsxs)(ge.a,{id:"max-width-dialog-title",children:["Invoice"," ",Object(k.jsx)(w.a,{onClick:he,color:"primary",style:{float:"right"},children:"Close"})]}),Object(k.jsxs)(fe.a,{children:[Object(k.jsxs)(Oe.a,{children:["Upload the file which contains the invoice data of clients",Object(k.jsx)("br",{}),' The fields below show an abstraction of your data. Please check that it is correct before clicking on "Send Data" which will store your file tables in the database.']}),Object(k.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(k.jsxs)(w.a,{variant:"contained",color:"primary",component:"label",title:"the files that contain your bill, receipt and your firm's data",children:[Object(k.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:function(e){xe(e.target.files[0])},hidden:!0}),"Upload File"]}),y?Object(k.jsxs)("div",{children:[Object(k.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h6",align:"left",gutterBottom:!0,children:"Users Data"}),Object(k.jsx)(be,{data:V,errors:te},"table1"),Object(k.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h6",align:"left",gutterBottom:!0,title:"The files you have uploaded will now be sent to the database.",children:"Solution Owners Data"}),Object(k.jsx)(be,{data:X,errors:ie},"table2"),!P&&Object(k.jsxs)("div",{children:[!!W&&Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)("p",{children:Object(k.jsx)("b",{children:"Errors Found in cust_data sheet:"})}),W.length?W.map((function(e){return Object(k.jsxs)("p",{children:["Missing item in cloumn ",e.cloumn_name," of row"," ",e.row]})})):"No errors"]}),!!G&&Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)("p",{children:Object(k.jsx)("b",{children:"Errors Found in SO_data sheet:"})}),G.length?G.map((function(e){return Object(k.jsxs)("p",{children:["Missing item in cloumn ",e.cloumn_name," of row"," ",e.row]})})):"No errors"]})]}),R>0?Object(k.jsx)(je.a,{variant:"determinate",value:R}):""]}):""]})]}),Object(k.jsx)(pe.a,{children:y&&Object(k.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){var e={headers:{token:t},onUploadProgress:function(e){var t=e.loaded,n=e.total,a=Math.floor(100*t/n);a<100&&I(a)}};le?window.alert("There is some error in the file uploaded. Please fix it to upload the file"):E.a.post("http://localhost:5000/invoices/uploadBillsData",g,e).then((function(e){I(100),setTimeout((function(){I(0)}),1e3),console.log(e),window.alert(e.data.message)})).catch((function(e){return console.log(e)}))},disabled:!P,children:"Send Invoices Data"})})]})]})};var _e=function(e){var t=e.token,n=Object(a.useState)([]),i=Object(l.a)(n,2),o=i[0],r=i[1],s=Object(a.useState)([]),d=Object(l.a)(s,2),u=d[0],j=d[1],h=c.a.useState(!1),b=Object(l.a)(h,2),m=b[0],p=b[1],f=Object(a.useState)({}),O=Object(l.a)(f,2),g=O[0],x=O[1],_=Object(a.useState)(!1),v=Object(l.a)(_,2),y=v[0],S=v[1],T=Object(a.useState)(!1),C=Object(l.a)(T,2),P=C[0],N=C[1],D=Object(a.useState)(0),F=Object(l.a)(D,2),R=F[0],I=F[1],A=Object(a.useState)(!1),U=Object(l.a)(A,2),W=U[0],L=U[1],M=Object(a.useState)([]),q=Object(l.a)(M,2),G=q[0],z=q[1],Y=Object(a.useState)([]),H=Object(l.a)(Y,2),V=H[0],J=H[1],K=Object(a.useState)([]),Q=Object(l.a)(K,2),X=Q[0],Z=Q[1],$=Object(a.useState)([]),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)([]),ce=Object(l.a)(ae,2),ie=ce[0],oe=ce[1],re=Object(a.useState)([]),se=Object(l.a)(re,2),le=se[0],de=se[1],he=Object(a.useState)({}),xe=Object(l.a)(he,2),_e=xe[0],ve=xe[1],we=Object(a.useState)({}),ye=Object(l.a)(we,2),Se=ye[0],ke=ye[1],Te=Object(a.useState)(!1),Ce=Object(l.a)(Te,2),Pe=Ce[0],Be=Ce[1],Ne=c.a.useRef(null),De=function(){p(!1)},Ee=function(e){var t=new FileReader;t.onload=function(e){!function(e){var t=ue.read(e,{type:"binary",cellDates:!0,cellNF:!1,cellText:!1}),n={};t.SheetNames.forEach((function(e){var a=ue.utils.sheet_to_row_object_array(t.Sheets[e]);console.log("sheetNames",t.SheetNames),n[e]=a})),r(n.cust_data),j(n.solutions_owner_data),x(n),S(!0)}(e.target.result)},t.readAsBinaryString(e)};return Object(a.useEffect)((function(){console.log("data of users",o),console.log("data of so",u),console.log("data in total",g)}),[o,u,g]),Object(a.useEffect)((function(){var e=!0;if(y){if(o.length){for(var t=[],n=["cust_id","cust_tax_id","cust_pan","cust_firm","cust_keyman","cust_email","cust_ph_isd","cust_ph_num","cust_add_cntry","cust_add_zip","cust_add_state","cust_add_city","cust_add_landmark","cust_add_street","invoice_dt","invoice_num","invoice_currency","invoice_amt","discount","email_dt","desc","TDS","GST","due_date","reminder_1","reminder_2","final_bal_due","recurring","Frequency","email_dt","paid","nonSystem_payment_method","Shown_in_System_Fag","nonSystem_payment_date","nonSystem_payment_amt"],a=0;a<o.length;a++){for(var c=[],i=0,r=Object.entries(o[a]);i<r.length;i++){var s=Object(l.a)(r[i],2),d=s[0],j=s[1];c.push(d),j||0!==j&&(e=!1,t.push({row:a,cloumn_name:d}))}for(var h=0;h<n.length;h++){for(var b=!1,m=0;m<c.length;m++)c[m]===n[h]&&(b=!0);b||(e=!1,t.push({row:a,cloumn_name:n[h]}))}}oe(t)}if(u.length){for(var p=[],f=["so_keyman","so_keyman_title","so_email","so_position","so_ph_isd","so_ph_num","so_add_cntry","so_add_zip","so_add_state","so_add_city","so_add_street","so_firm","so_firm_email","so_firm_acc_name","so_firm_acc_num","so_firm_ifsc","so_firm_swift","so_firm_ph_isd","so_firm_ph_num","so_firm_add_cntry","so_firm_add_zip","so_firm_add_state","so_firm_add_city","so_firm_add_street"],O=0;O<u.length;O++){for(var g=[],x=0,_=Object.entries(u[O]);x<_.length;x++){var v=Object(l.a)(_[x],2),w=v[0],S=v[1];g.push(w),S||0!==S&&(e=!1,p.push({row:O,cloumn_name:w}))}for(var k=0;k<f.length;k++){for(var T=!1,C=0;C<g.length;C++)g[C]===f[k]&&(T=!0);T||(e=!1,p.push({row:O,cloumn_name:f[k]}))}}de(p)}e?N(!0):window.alert("Missing Data in user data sheet. Fix it to send file")}}),[y,u,o]),Object(a.useEffect)((function(){for(var e=[],t=[],n=0;n<o.length;n++){for(var a={},c=0,i=Object.entries(o[n]);c<i.length;c++){var r=Object(l.a)(i[c],2),s=r[0],d=r[1];if("invoice_dt"===s||"cust_tax_id"===s||"cust_keyman"===s||"cust_email"===s||"cust_firm"===s||"invoice_num"===s||"invoice_currency"===s||"email_dt"===s||"final_bal_due"===s)if("final_bal_due"===s)a[s]=Math.round(100*d)/100;else if("email_dt"===s||"invoice_dt"===s){var j=new Date(d);a[s]=j.toDateString()}else a[s]=d}e.push(a)}for(var h=0;h<u.length;h++){for(var b={},m=0,p=Object.entries(u[h]);m<p.length;m++){var f=Object(l.a)(p[m],2),O=f[0],g=f[1];"so_keyman"!==O&&"so_email"!==O&&"so_firm_email"!==O&&"so_firm_email"!==O&&"so_firm_acc_name"!==O&&"so_firm_acc_num"!==O&&"so_firm_ifsc"!==O&&"so_firm_swift"!==O||(b[O]=g)}t.push(b)}Z(e),ne(t)}),[u,o]),Object(a.useEffect)((function(){for(var e={},t=0;t<ie.length;t++){[].includes(ie[t].cloumn_name)&&(e[ie[t].row]="#FF6666"),["invoice_dt","cust_tax_id","cust_keyman","cust_email","cust_firm","invoice_num","invoice_currency","email_dt","final_bal_due"].includes(ie[t].cloumn_name)&&(Be(!0),e[ie[t].row]="#FFB266")}ve(e);for(var n={},a=0;a<le.length;a++){[].includes(le[a].cloumn_name)&&(n[le[a].row]="#FF6666"),["so_firm_acc_name","so_firm_acc_num","so_firm_ifsc","so_firm_swift"].includes(le[a].cloumn_name)&&(Be(!0),n[le[a].row]="#FFB266")}ke(n)}),[ie,le]),Object(a.useEffect)((function(){Ne.current&&Ne.current.scrollIntoView({behaviour:"smooth"})}),[W]),Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){p(!0)},style:{marginRight:"10px"},children:"Upload Receipts"}),Object(k.jsxs)(me.a,{fullWidth:!0,maxWidth:"xl",open:m,onClose:De,"aria-labelledby":"max-width-dialog-title",children:[Object(k.jsxs)(ge.a,{id:"max-width-dialog-title",children:["Receipts",Object(k.jsx)(w.a,{onClick:De,color:"primary",style:{float:"right"},children:"Close"})]}),Object(k.jsxs)(fe.a,{children:[Object(k.jsxs)(Oe.a,{children:["Enter the receipt data here ONLY against invoices for which payment was received outside this system such as cash, a paper-based check, etc.",Object(k.jsx)("br",{}),' The fields below show an abstraction of your data. Please check that it is correct before clicking on "Send Data" which will store your file tables in the database.']}),Object(k.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(k.jsxs)(w.a,{variant:"contained",color:"primary",component:"label",children:[Object(k.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:function(e){Ee(e.target.files[0])},hidden:!0}),"Upload File"]}),y&&Object(k.jsxs)("div",{children:[Object(k.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h6",align:"center",gutterBottom:!0,children:"Users Data :"}),Object(k.jsx)(be,{data:X,errors:_e},"table1"),Object(k.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h6",align:"center",gutterBottom:!0,children:"Solution Owners Data :"}),Object(k.jsx)(be,{data:te,errors:Se},"table2"),!P&&Object(k.jsxs)("div",{children:[ie&&Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)("p",{children:Object(k.jsx)("b",{children:"Errors Found in cust_data sheet:"})}),ie.length?ie.map((function(e){return Object(k.jsxs)("p",{children:["Missing item in cloumn ",e.cloumn_name," of row"," ",e.row]})})):"No errors"]}),le&&Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)("p",{children:Object(k.jsx)("b",{children:"Errors Found in SO_data sheet:"})}),le.length?le.map((function(e){return Object(k.jsxs)("p",{children:["Missing item in cloumn ",e.cloumn_name," of row"," ",e.row]})})):"No errors"]})]}),W&&Object(k.jsxs)("div",{ref:Ne,style:{marginTop:"10px"},children:[G.length?Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{children:Object(k.jsx)("b",{children:"Emails Not Found:"})}),G.map((function(e,t){return Object(k.jsx)("p",{children:e},t)}))]}):Object(k.jsx)("p",{children:Object(k.jsx)("b",{children:"All emails found"})}),V.length?Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{children:Object(k.jsx)("b",{children:"Bills Not Found:"})}),V.map((function(e,t){return Object(k.jsx)("p",{children:e},t)}))]}):Object(k.jsxs)("p",{children:[" ",Object(k.jsx)("b",{children:"All bills found"})]})]}),R>0&&Object(k.jsx)(je.a,{variant:"determinate",value:R})]})]})]}),Object(k.jsx)(pe.a,{children:y&&Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){var e={headers:{token:t},onUploadProgress:function(e){var t=e.loaded,n=e.total,a=Math.floor(100*t/n);a<100&&I(a)}};E.a.post("http://localhost:5000/invoices/confrimReceiptsUpload",g,e).then((function(e){I(100),setTimeout((function(){I(0)}),1e3),console.log(e.data),e.data.missing&&(z(e.data.not_found.emails),J(e.data.not_found.bills)),L(!0)})).catch((function(e){return console.log(e)}))},disabled:!P,style:{display:W?"none":"block"},children:"Send Receipts Data"}),W&&Object(k.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){var e={headers:{token:t},onUploadProgress:function(e){var t=e.loaded,n=e.total,a=Math.floor(100*t/n);a<100&&I(a)}};Pe?window.alert("There is some error in the file uploaded. Please fix it to upload the file"):E.a.post("http://localhost:5000/invoices/uploadReceiptsData",g,e).then((function(e){I(100),setTimeout((function(){I(0)}),1e3),console.log(e),window.alert(e.data.message)})).catch((function(e){return console.log(e)}))},children:"Confrim and Submit"})]})})]})]})};var ve=function(e){var t=e.token,n=Object(a.useState)([]),i=Object(l.a)(n,2),o=i[0],r=i[1],s=c.a.useState(!1),d=Object(l.a)(s,2),u=d[0],j=d[1],h=Object(a.useState)({}),b=Object(l.a)(h,2),m=b[0],p=b[1],f=Object(a.useState)(!1),O=Object(l.a)(f,2),g=O[0],x=O[1],_=Object(a.useState)(!1),v=Object(l.a)(_,2),y=v[0],S=v[1],T=Object(a.useState)(0),C=Object(l.a)(T,2),P=C[0],N=C[1],D=Object(a.useState)([]),F=Object(l.a)(D,2),R=F[0],I=F[1],A=Object(a.useState)([]),U=Object(l.a)(A,2),W=U[0],L=U[1],M=Object(a.useState)({}),q=Object(l.a)(M,2),G=q[0],z=q[1],Y=Object(a.useState)(!1),H=Object(l.a)(Y,2),V=H[0],J=H[1],K=function(){j(!1)},Q=function(e){var t=new FileReader;t.onload=function(e){!function(e){var t=ue.read(e,{type:"binary",cellDates:!0,cellNF:!1,cellText:!1}),n={};t.SheetNames.forEach((function(e){var a=ue.utils.sheet_to_row_object_array(t.Sheets[e]);console.log("sheetNames",t.SheetNames),n[e]=a})),r(n.cust_data),p(n),x(!0)}(e.target.result)},t.readAsBinaryString(e)};return Object(a.useEffect)((function(){console.log("data of users",o),console.log("data in total",m)}),[o,m]),Object(a.useEffect)((function(){var e=!0;if(g){if(o.length){for(var t=[],n=["cust_id","cust_tax_id","cust_pan","cust_firm","cust_keyman","cust_email","cust_ph_isd","cust_ph_num","cust_add_cntry","cust_add_zip","cust_add_state","cust_add_city","cust_add_landmark","cust_add_street"],a=0;a<o.length;a++){for(var c=[],i=0,r=Object.entries(o[a]);i<r.length;i++){var s=Object(l.a)(r[i],2),d=s[0],u=s[1];c.push(d),u||0!==u&&(e=!1,t.push({row:a,cloumn_name:d}))}for(var j=0;j<n.length;j++){for(var h=!1,b=0;b<c.length;b++)c[b]===n[j]&&(h=!0);h||(e=!1,t.push({row:a,cloumn_name:n[j]}))}}L(t)}e?S(!0):window.alert("Missing Data in user data sheet. Fix it to send file")}}),[g,o]),Object(a.useEffect)((function(){for(var e=[],t=0;t<o.length;t++){for(var n={},a=0,c=Object.entries(o[t]);a<c.length;a++){var i=Object(l.a)(c[a],2),r=i[0],s=i[1];if("cust_tax_id"===r||"cust_keyman"===r||"cust_email"===r||"cust_firm"===r)if("final_bal_due"===r)n[r]=Math.round(100*s)/100;else if("email_dt"===r||"invoice_dt"===r){var d=new Date(s);n[r]=d.toDateString()}else n[r]=s}e.push(n)}I(e)}),[o]),Object(a.useEffect)((function(){for(var e={},t=0;t<W.length;t++){[].includes(W[t].cloumn_name)&&(e[W[t].row]="#FF6666"),["cust_tax_id","cust_keyman","cust_email","cust_firm"].includes(W[t].cloumn_name)&&(J(!0),e[W[t].row]="#FFB266")}z(e)}),[W]),Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){j(!0)},style:{marginRight:"10px"},children:"Upload Users Data"}),Object(k.jsxs)(me.a,{fullWidth:!0,maxWidth:"xl",open:u,onClose:K,"aria-labelledby":"max-width-dialog-title",children:[Object(k.jsxs)(ge.a,{id:"max-width-dialog-title",children:["Receipts",Object(k.jsx)(w.a,{onClick:K,color:"primary",style:{float:"right"},children:"Close"})]}),Object(k.jsxs)(fe.a,{children:[Object(k.jsx)(Oe.a,{children:"Upload a file which contains user data."}),Object(k.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(k.jsxs)(w.a,{variant:"contained",color:"primary",component:"label",children:[Object(k.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:function(e){Q(e.target.files[0])},hidden:!0}),"Upload File"]}),g&&Object(k.jsxs)("div",{children:[Object(k.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h6",align:"center",gutterBottom:!0,children:"Users Data :"}),Object(k.jsx)(be,{data:R,errors:G},"table1"),!y&&Object(k.jsx)("div",{children:W&&Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)("p",{children:Object(k.jsx)("b",{children:"Errors Found in cust_data sheet:"})}),W.length?W.map((function(e){return Object(k.jsxs)("p",{children:["Missing item in cloumn ",e.cloumn_name," of row"," ",e.row]})})):"No errors"]})}),P>0&&Object(k.jsx)(je.a,{variant:"determinate",value:P})]})]})]}),Object(k.jsx)(pe.a,{children:g&&Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){var e={headers:{token:t},onUploadProgress:function(e){var t=e.loaded,n=e.total,a=Math.floor(100*t/n);a<100&&N(a)}};V?window.alert("There is some error in the file uploaded. Please fix it to upload the file"):E.a.post("http://localhost:5000/users/uploadUsers",m,e).then((function(e){N(100),setTimeout((function(){N(0)}),1e3),console.log(e),window.alert(e.data.message)})).catch((function(e){return console.log(e)}))},disabled:!y,style:{display:g?"block":"none"},children:"Send User Data"})})})]})]})},we=Object(p.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}}));function ye(e){var t=e.username,n=e.token,a=we(),i=c.a.useState(null),o=Object(l.a)(i,2),r=o[0],s=o[1];return Object(k.jsx)("div",{className:a.root,children:Object(k.jsx)(oe.a,{position:"static",style:{marginBottom:"5px"},children:Object(k.jsxs)(re.a,{children:[Object(k.jsx)(x.a,{href:"/",edge:"start",className:a.menuButton,color:"inherit","aria-label":"home",children:Object(k.jsx)(le.a,{})}),Object(k.jsx)(B.a,{variant:"h6",className:a.title,children:"Payment management service"}),Object(k.jsxs)("div",{children:[Object(k.jsx)(xe,{token:n}),Object(k.jsx)(_e,{token:n}),Object(k.jsx)(ve,{token:n}),Object(k.jsxs)(w.a,{className:a.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:[t,Object(k.jsx)("span",{className:"material-icons-outlined",children:"expand_more"})]}),Object(k.jsxs)(de.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){s(null)},children:[Object(k.jsx)(f.a,{onClick:function(){window.location.replace("http://".concat(window.location.host,"/myAccount"))},children:"My account"}),Object(k.jsx)(f.a,{onClick:function(){localStorage.removeItem("token"),window.location.replace("http://".concat(window.location.host))},children:"Logout"})]})]})]})})})}var Se=n(11),ke=function(){var e=localStorage.getItem("token"),t=Object(a.useState)([]),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(""),s=Object(l.a)(o,2),p=s[0],f=s[1],O=Object(a.useState)(!0),g=Object(l.a)(O,2),x=g[0],_=g[1],v=Object(a.useState)(null),w=Object(l.a)(v,2),y=w[0],S=w[1];Object(a.useEffect)((function(){e?(Se.get("http://localhost:5000/users/single_user",{headers:{token:e}}).then((function(e){f(e.data.name)})).catch((function(e){window.alert("some error occured check console"),console.log(e)})),Se.get("http://localhost:5000/users/all_users",{headers:{token:e}}).then((function(e){i(e.data)})).catch((function(e){console.log(e)}))):window.alert("You are not logged in")}),[e]);var T=function(e){S(e),_(!1)};return Object(k.jsxs)(r.a,{children:[Object(k.jsx)(ye,{username:p,token:e}),x?Object(k.jsxs)("div",{children:[Object(k.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h2",align:"center",gutterBottom:!0,children:"Admin Dashboard"}),Object(k.jsx)(N.a,{children:Object(k.jsx)(m.a,{style:{overflow:"auto",margin:"7px",marginTop:0,border:"1.5px solid rgb(243, 243, 243)",borderBottom:0},children:Object(k.jsxs)(d.a,{children:[Object(k.jsx)(h.a,{children:Object(k.jsxs)(b.a,{children:[Object(k.jsx)(j.a,{children:Object(k.jsx)("b",{children:"User Name"})}),Object(k.jsx)(j.a,{children:Object(k.jsx)("b",{children:"Email"})}),Object(k.jsx)(j.a,{children:Object(k.jsx)("b",{children:"Approval"})}),Object(k.jsx)(j.a,{children:Object(k.jsx)("b",{children:"Role"})}),Object(k.jsx)(j.a,{style:{textAlign:"center"},children:Object(k.jsx)("b",{children:"Payments"})}),Object(k.jsx)(j.a,{style:{textAlign:"center"},children:Object(k.jsx)("b",{children:"Delete User"})})]})}),Object(k.jsx)(u.a,{children:c.map((function(t){return Object(k.jsx)(P,{token:e,user:t,getReceipts:T},t._id)}))})]})})})]}):Object(k.jsx)(ie,{userID:y,token:e,toggleView:function(){_(!0)}})]})},Te=n(218),Ce=n(229),Pe=n(230),Be=n(219),Ne=n(38),De=n.n(Ne),Ee=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),o=Object(l.a)(i,2),r=o[0],s=o[1];return Object(k.jsx)(Te.a,{children:Object(k.jsxs)(W.a,{elevation:10,style:{padding:20,width:280,margin:"20px auto"},children:[Object(k.jsxs)(Te.a,{align:"center",children:[Object(k.jsx)(Ce.a,{style:{backgroundColor:"rgb(63, 81, 181)"},children:Object(k.jsx)(De.a,{style:{backgroundColor:"rgb(51, 70, 176)"}})}),Object(k.jsx)("h2",{style:{marginTop:"20px"},children:"Login"})]}),Object(k.jsx)(Pe.a,{label:"Email",placeholder:"Enter Email",fullWidth:!0,required:!0,value:n,style:{marginTop:"20px"},onChange:function(e){c(e.target.value)}}),Object(k.jsx)(Pe.a,{label:"Password",placeholder:"Enter password",type:"password",fullWidth:!0,required:!0,style:{marginTop:"7px"},value:r,onChange:function(e){s(e.target.value)}}),Object(k.jsx)(w.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"45px"},fullWidth:!0,onClick:function(){E.a.post("http://localhost:5000/users/login",{email:n,password:r}).then((function(e){return e.data})).then((function(e){400===e.status?(console.log(e),window.alert(e.message)):(localStorage.setItem("token",e.token),localStorage.setItem("user",e.user),e.user.isAdmin?window.location.replace("http://".concat(window.location.host,"/dashboard")):e.user.approved?window.location.replace("http://".concat(window.location.host,"/userPage")):window.location.replace("http://".concat(window.location.host,"/unapproved")))})).catch((function(e){console.log(e)}))},children:"Log in"}),Object(k.jsxs)(B.a,{style:{marginTop:"5px"},children:[" ","New here? ",Object(k.jsx)(Be.a,{href:"/register",children:"Register"})]}),Object(k.jsxs)(B.a,{children:[" ","Forgot password? ",Object(k.jsx)(Be.a,{href:"/forgotPassword",children:"Click here"})]})]})})},Fe=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(""),r=Object(l.a)(o,2),s=r[0],d=r[1],u=Object(a.useState)(""),j=Object(l.a)(u,2),h=j[0],b=j[1],m=Object(a.useState)(""),p=Object(l.a)(m,2),f=p[0],O=p[1];return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)(Te.a,{children:Object(k.jsxs)(W.a,{elevation:10,style:{padding:20,width:280,margin:"20px auto"},children:[Object(k.jsxs)(Te.a,{align:"center",children:[Object(k.jsx)(Ce.a,{style:{backgroundColor:"rgb(63, 81, 181)"},children:Object(k.jsx)(De.a,{})}),Object(k.jsx)("h2",{style:{marginTop:"20px"},children:"Register"})]}),Object(k.jsx)(Pe.a,{label:"Name",placeholder:"Enter Name",fullWidth:!0,required:!0,value:n,style:{marginTop:"15px"},onChange:function(e){i(e.target.value)}}),Object(k.jsx)(Pe.a,{label:"Email",placeholder:"Enter Email",fullWidth:!0,required:!0,value:f,onChange:function(e){O(e.target.value)}}),Object(k.jsx)(Pe.a,{label:"Password",placeholder:"Enter password",type:"password",fullWidth:!0,required:!0,value:s,onChange:function(e){d(e.target.value)}}),Object(k.jsx)(Pe.a,{label:"Confrim password",placeholder:"Re-enter password",type:"password",fullWidth:!0,required:!0,value:h,onChange:function(e){b(e.target.value)}}),Object(k.jsx)(w.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"50px"},fullWidth:!0,onClick:function(){s.length<6?window.alert("Password length should be more than 6"):h===s?E.a.post("http://localhost:5000/users/register",{name:n,email:f,password:s}).then((function(e){200===e.data.status?(window.alert("Registered sucessfully"),window.alert(e.data.message),window.location.replace("http://".concat(window.location.host,"/login"))):400===e.data.status?e.data.message&&(window.alert(e.data.message),window.location.reload()):(window.alert("Some error occured. check console."),console.log(e.data))})).catch((function(e){console.log(e)})):window.alert("Passwords don't match")},children:"Register"}),Object(k.jsxs)(B.a,{style:{marginTop:"5px"},children:[" ","Have an account?",Object(k.jsx)(Be.a,{href:"/login",children:" Login"})]})]})})})},Re=Object(p.a)({container:{display:"flex",flexDirection:"column"},login:{margin:"50px"},register:{margin:"0 50px"}}),Ie=function(){var e=Re();return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsxs)(N.a,{className:e.container,maxWidth:"xs",children:[Object(k.jsx)(w.a,{className:e.login,variant:"contained",color:"primary",href:"/login",children:"Login"}),Object(k.jsx)(w.a,{className:e.register,variant:"contained",color:"primary",href:"/register",children:"Register"})]})})},Ae=function(){return Object(k.jsx)("h1",{children:"not found"})},Ue=Object(p.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}})),We=function(){var e=Ue();return Object(k.jsxs)(r.a,{children:[Object(k.jsx)("div",{className:e.root,children:Object(k.jsx)(oe.a,{position:"static",style:{marginBottom:"5px"},children:Object(k.jsxs)(re.a,{children:[Object(k.jsx)(x.a,{href:"/",edge:"start",className:e.menuButton,color:"inherit","aria-label":"home",children:Object(k.jsx)(le.a,{})}),Object(k.jsx)(B.a,{variant:"h6",className:e.title,children:"Payment Management Service"}),Object(k.jsx)("div",{children:Object(k.jsx)(w.a,{className:e.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",href:"/login",children:"Log In"})})]})})}),Object(k.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h2",align:"center",gutterBottom:!0,children:"You are not approved by the admin"})]})},Le=function(e){var t=e.token;return Object(k.jsx)(w.a,{style:{margin:20},variant:"contained",color:"primary",onClick:function(){window.location.replace("http://".concat(window.location.host,"/resetPassword/").concat(t))},children:"Reset Password"})},Me=Object(p.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}}));function qe(e){var t=e.username,n=e.token,a=Me(),i=c.a.useState(null),o=Object(l.a)(i,2),r=o[0],s=o[1];return Object(k.jsx)("div",{className:a.root,children:Object(k.jsx)(oe.a,{position:"static",style:{marginBottom:"5px"},children:Object(k.jsxs)(re.a,{children:[Object(k.jsx)(x.a,{href:"/",edge:"start",className:a.menuButton,color:"inherit","aria-label":"home",children:Object(k.jsx)(le.a,{})}),Object(k.jsx)(B.a,{variant:"h6",className:a.title,children:"Payment management service"}),Object(k.jsxs)("div",{children:[Object(k.jsx)(Le,{token:n}),Object(k.jsxs)(w.a,{className:a.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:[t,Object(k.jsx)("span",{className:"material-icons-outlined",children:"expand_more"})]}),Object(k.jsx)(de.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){s(null)},children:Object(k.jsx)(f.a,{onClick:function(){localStorage.removeItem("token"),window.location.replace("http://".concat(window.location.host))},children:"Logout"})})]})]})})})}var Ge=function(e){var t=e.token,n=Object(a.useState)([]),c=Object(l.a)(n,2),i=c[0],o=c[1],s=Object(a.useState)(!1),d=Object(l.a)(s,2),u=d[0],j=d[1];Object(a.useEffect)((function(){h()}),[]);var h=function(){E.a.get("http://localhost:5000/invoices/userBills",{headers:{token:t}}).then((function(e){return e.data})).then((function(e){o(e.bills),e.haveBills&&j(!0)})).catch((function(e){window.alert("some error occured check console"),console.log(e)}))};return Object(k.jsxs)(r.a,{children:[Object(k.jsx)(B.a,{style:{marginTop:"5px",marginLeft:"30px"},variant:"h6",component:"h2",align:"left",gutterBottom:!0,children:Object(k.jsx)("b",{children:"Pending Invoices"})}),Object(k.jsx)(N.a,{children:u?Object(k.jsx)(ae,{rows_data:i}):Object(k.jsx)(B.a,{style:{marginTop:"5px",marginLeft:"15px"},variant:"body1",component:"h2",align:"left",gutterBottom:!0,children:"You dont have any pending bills"})})]})},ze=function(e){var t=e.token,n=Object(a.useState)([]),c=Object(l.a)(n,2),i=c[0],o=c[1],s=Object(a.useState)(!1),d=Object(l.a)(s,2),u=d[0],j=d[1];Object(a.useEffect)((function(){h()}),[]);var h=function(){E.a.get("http://localhost:5000/invoices/userReceipts/:id",{headers:{token:t}}).then((function(e){return e.data})).then((function(e){o(e.receipts),e.haveReceipts&&j(!0)})).catch((function(e){window.alert("some error occured check console"),console.log(e)}))};return Object(k.jsx)(r.a,{children:u?Object(k.jsx)(J,{rows_data:i}):Object(k.jsx)(B.a,{variant:"h5",component:"h2",align:"left",gutterBottom:!0,children:"You dont have any paid invoices"})})},Ye=n(11),He=function(){var e=localStorage.getItem("token"),t=Object(a.useState)({}),n=Object(l.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){e?Ye.get("http://localhost:5000/users/single_user",{headers:{token:e}}).then((function(e){i(e.data)})).catch((function(e){console.log(e)})):window.alert("You are not logged in")}),[e]),Object(k.jsxs)(r.a,{children:[Object(k.jsx)(qe,{username:c.name,token:e}),Object(k.jsx)(Ge,{token:e}),Object(k.jsx)(ze,{token:e})]})},Ve=function(e){var t=e.match.params.token,n=Object(a.useState)(""),c=Object(l.a)(n,2),i=c[0],o=c[1];return Object(k.jsx)(Te.a,{children:Object(k.jsxs)(W.a,{elevation:10,style:{padding:20,height:"70vh",width:280,margin:"20px auto"},children:[Object(k.jsxs)(Te.a,{align:"center",children:[Object(k.jsx)(Ce.a,{style:{backgroundColor:"rgb(51, 70, 176)"},children:Object(k.jsx)(De.a,{style:{backgroundColor:"rgb(51, 70, 176)"}})}),Object(k.jsx)("h2",{style:{marginTop:"20px"},children:"Reset Password"})]}),Object(k.jsx)(Pe.a,{label:"New Password",placeholder:"Enter new password",type:"password",fullWidth:!0,required:!0,style:{marginTop:"7px"},value:i,onChange:function(e){o(e.target.value)}}),Object(k.jsx)(w.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"68px"},fullWidth:!0,onClick:function(){i.length<6?window.alert("Password should be more than 6"):E.a.put("http://localhost:5000/users/changePassword",{password:i},{headers:{token:t}}).then((function(e){return e.data})).then((function(e){400===e.status?window.alert(e.message):(window.alert(e.message),window.location.replace("http://".concat(window.location.host,"/login")))})).catch((function(e){console.log(e)}))},children:"Reset"})]})})},Je=Object(p.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}})),Ke=function(e){var t=e.match.params.token,n=Je();Object(a.useEffect)((function(){c()}),[]);var c=function(){E.a.put("http://localhost:5000/users/verifyUser/".concat(t)).then((function(e){return e.data})).then((function(e){400===e.status?window.alert(e.message):(window.alert(e.message),window.location.replace("http://".concat(window.location.host,"/login")))})).catch((function(e){console.log(e)}))};return Object(k.jsxs)(r.a,{children:[Object(k.jsx)("div",{className:n.root,children:Object(k.jsx)(oe.a,{position:"static",style:{marginBottom:"5px"},children:Object(k.jsxs)(re.a,{children:[Object(k.jsx)(x.a,{href:"/",edge:"start",className:n.menuButton,color:"inherit","aria-label":"home",children:Object(k.jsx)(le.a,{})}),Object(k.jsx)(B.a,{variant:"h6",className:n.title,children:"Payment management service"}),Object(k.jsx)("div",{children:Object(k.jsx)(w.a,{className:n.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",href:"/login",children:"Log In"})})]})})}),Object(k.jsx)(B.a,{style:{marginTop:"5px"},variant:"h5",component:"h2",align:"center",gutterBottom:!0,children:"You have been verified"})]})},Qe=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(k.jsx)(Te.a,{children:Object(k.jsxs)(W.a,{elevation:10,style:{padding:20,height:"70vh",width:280,margin:"20px auto"},children:[Object(k.jsxs)(Te.a,{align:"center",children:[Object(k.jsx)(Ce.a,{style:{backgroundColor:"rgb(51, 70, 176)"},children:Object(k.jsx)(De.a,{style:{backgroundColor:"rgb(51, 70, 176)"}})}),Object(k.jsx)("h2",{style:{marginTop:"20px"},children:"Forgot Password"})]}),Object(k.jsx)(Pe.a,{label:"Email",placeholder:"Enter Email",type:"Email",fullWidth:!0,required:!0,style:{marginTop:"7px"},value:n,onChange:function(e){c(e.target.value)}}),Object(k.jsx)(w.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"68px"},fullWidth:!0,onClick:function(){E.a.put("http://localhost:5000/users/forgotPassword/".concat(n)).then((function(e){return e.data})).then((function(e){400===e.status?window.alert(e.message):(window.alert(e.message),window.location.replace("http://".concat(window.location.host,"/login")))})).catch((function(e){console.log(e)}))},children:"Send mail"})]})})},Xe=n(11),Ze=function(){var e=localStorage.getItem("token"),t=Object(a.useState)({}),n=Object(l.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){e?Xe.get("http://localhost:5000/users/single_user",{headers:{token:e}}).then((function(e){i(e.data)})).catch((function(e){console.log(e)})):window.alert("You are not logged in")}),[e]),Object(k.jsxs)(r.a,{children:[Object(k.jsx)(ye,{username:c.name,token:e}),Object(k.jsx)(Le,{token:e})]})},$e=function(){return Object(k.jsx)(r.a,{children:Object(k.jsxs)(s.c,{children:[Object(k.jsx)(s.a,{exact:!0,path:"/",component:Ie}),Object(k.jsx)(s.a,{exact:!0,path:"/dashboard",component:ke}),Object(k.jsx)(s.a,{exact:!0,path:"/login",component:Ee}),Object(k.jsx)(s.a,{exact:!0,path:"/register",component:Fe}),Object(k.jsx)(s.a,{exact:!0,path:"/unapproved",component:We}),Object(k.jsx)(s.a,{exact:!0,path:"/userPage",component:He}),Object(k.jsx)(s.a,{exact:!0,path:"/myAccount",component:Ze}),Object(k.jsx)(s.a,{exact:!0,path:"/forgotPassword",component:Qe}),Object(k.jsx)(s.a,{path:"/resetPassword/:token",component:Ve}),Object(k.jsx)(s.a,{path:"/verifyUser/:token",component:Ke}),Object(k.jsx)(s.a,{component:Ae})]})})};o.a.render(Object(k.jsx)($e,{}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.7a4f67b9.chunk.js.map