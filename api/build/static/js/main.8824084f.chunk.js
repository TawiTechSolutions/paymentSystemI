(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{142:function(e,t){},143:function(e,t){},147:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(12),r=n.n(c),i=n(26),s=n(13),l=n(8),d=n(180),h=n(182),j=n(184),u=n(151),p=n(186),b=n(185),g=n(45),m=n.n(g),x=n(92),O=n(202),f=n(2),w=Object(d.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}}));function v(e){var t=e.username,n=w(),a=o.a.useState(null),c=Object(l.a)(a,2),r=c[0],i=c[1],s=function(){i(null)};return Object(f.jsx)("div",{className:n.root,children:Object(f.jsx)(h.a,{position:"static",style:{marginBottom:"5px"},children:Object(f.jsxs)(j.a,{children:[Object(f.jsx)(b.a,{href:"/",edge:"start",className:n.menuButton,color:"inherit","aria-label":"home",children:Object(f.jsx)(m.a,{})}),Object(f.jsx)(u.a,{variant:"h6",className:n.title,children:"Payment management service"}),Object(f.jsxs)("div",{children:[Object(f.jsxs)(p.a,{className:n.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},children:[t,Object(f.jsx)("span",{className:"material-icons-outlined",children:"expand_more"})]}),Object(f.jsxs)(x.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:s,children:[Object(f.jsx)(O.a,{onClick:s,children:"My account"}),Object(f.jsx)(O.a,{onClick:function(){localStorage.removeItem("token"),window.location.replace("http://".concat(window.location.host))},children:"Logout"})]})]})]})})})}var y=n(194),k=n(196),C=n(188),S=n(195),T=n(187),N=n(199),E=n(189),P=n(200),R=n(91),_=n.n(R),B=n(17),A=Object(d.a)({table:{minWidth:650},TableRow:{TableCell:{color:"white"}}}),W=function(e){var t=e.user,n=e.token,o=A(),c=Object(a.useState)(t.isAdmin),r=Object(l.a)(c,2),i=r[0],s=r[1],d=Object(a.useState)(t.approved),h=Object(l.a)(d,2),j=h[0],u=h[1];return Object(f.jsxs)(T.a,{children:[Object(f.jsx)(C.a,{style:{padding:"0 16px"},children:t.name}),Object(f.jsx)(C.a,{style:{padding:"0 16px"},children:t.email}),Object(f.jsx)(C.a,{style:{padding:"0 16px"},children:j?"Approved":Object(f.jsx)(p.a,{onClick:function(){!function(e){if(window.confirm("Apprrove? This action cannot be reversed")){u(!0);var a={name:t.name,email:t.email,password:t.password,isAdmin:t.isAdmin,approved:!0};B.put("http://localhost:5000/users/update/".concat(e),a,{headers:{token:n,"Content-Type":"application/json"}}).then((function(e){window.alert(e.data.message)})).catch((function(e){console.log(e)}))}}(t._id)},variant:"contained",color:"primary",children:"Approve"})}),Object(f.jsx)(C.a,{style:{padding:"0 16px"},children:Object(f.jsx)(E.a,{className:o.formControl,children:Object(f.jsxs)(P.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:i,onChange:function(e){!function(e,a){if(i)window.alert("Cannot change role of admin");else if(window.confirm("Make admin? After user is made admin you cannot change back")){s(a.target.value);var o={name:t.name,email:t.email,password:t.password,isAdmin:!0};B.put("http://localhost:5000/users/updateRole/".concat(e),o,{headers:{token:n,"Content-Type":"application/json"}}).then((function(e){window.alert(e.data.message)})).catch((function(e){console.log(e)}))}}(t._id,e)},children:[Object(f.jsx)(O.a,{value:!0,children:"Admin"}),Object(f.jsx)(O.a,{value:!1,children:"User"})]})})}),Object(f.jsx)(C.a,{style:{padding:"0 16px"},children:Object(f.jsx)(b.a,{onClick:function(){var e;e=t._id,window.confirm("Want to delete?")&&B.delete("http://localhost:5000/users/".concat(e),{headers:{token:n}}).then((function(e){window.alert(e.data.message),window.location.reload()})).catch((function(e){console.log(e)}))},"aria-label":"delete",className:o.margin,children:Object(f.jsx)(_.a,{})})})]})},I=n(193),U=n(69),L=n(17),q=n.n(L),D=n(192);var F=function(e){var t=e.token,n=Object(a.useState)([]),o=Object(l.a)(n,2),c=o[0],r=o[1],i=Object(a.useState)([]),s=Object(l.a)(i,2),d=s[0],h=s[1],j=Object(a.useState)(null),u=Object(l.a)(j,2),p=u[0],b=u[1],g=Object(a.useState)(0),m=Object(l.a)(g,2),x=m[0],O=m[1],w=function(e,n){var a={headers:{token:t},onUploadProgress:function(e){var t=e.loaded,n=e.total,a=Math.floor(100*t/n);a<100&&O(a)}};q.a.post("http://localhost:5000/users/uploadUsers",{columns:e,users_data:n},a).then((function(e){O(100),setTimeout((function(){O(0)}),1e3),window.alert(e.data.message)}))};return Object(a.useEffect)((function(){console.log("columns",c),console.log("data in columns",d),console.log("percentage",x)}),[d,c,x]),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:function(e){b(e.target.files[0])}}),Object(f.jsx)("button",{onClick:function(){var e=new FileReader;e.onload=function(e){var t=e.target.result,n=U.read(t,{type:"binary"}),a=n.SheetNames[0],o=n.Sheets[a];!function(e){for(var t=e.split(/\r\n|\n/),n=t[0].split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/),a=[],o=1;o<t.length;o++){var c=t[o].split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/);if(n&&c.length===n.length){for(var i={},s=0;s<n.length;s++){var l=c[s];l.length>0&&('"'===l[0]&&(l=l.substring(1,l.length-1)),'"'===l[l.length-1]&&(l=l.substring(l.length-2,1))),n[s]&&(i[n[s]]=l)}Object.values(i).filter((function(e){return e})).length>0&&a.push(i)}}var d=n.map((function(e){return{name:e,selector:e}}));h(a),r(d),w(d,a)}(U.utils.sheet_to_csv(o,{header:1}))},e.readAsBinaryString(p)},children:"Upload Users Data"}),x>0?Object(f.jsx)(D.a,{variant:"determinate",value:x}):""]})};var G=function(e){var t=e.token,n=Object(a.useState)(null),o=Object(l.a)(n,2),c=o[0],r=o[1],i=Object(a.useState)(0),s=Object(l.a)(i,2),d=s[0],h=s[1];return Object(a.useEffect)((function(){console.log("file",c),console.log("percentage",d)}),[c,d]),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:function(e){r(e.target.files[0])}}),Object(f.jsx)("button",{onClick:function(){var e=new FormData;e.append("file",c),function(e){var n={headers:{token:t},onUploadProgress:function(e){var t=e.loaded,n=e.total,a=Math.floor(100*t/n);a<100&&h(a)}};q.a.post("http://localhost:5000/receipts/uploadReceiptData",e,n).then((function(e){h(100),setTimeout((function(){h(0)}),1e3),console.log(e),window.alert(e.data.message)})).catch((function(e){return console.log(e)}))}(e)},children:"Upload Recipts Data"}),d>0?Object(f.jsx)(D.a,{variant:"determinate",value:d}):""]})},M=n(17),Y=function(){var e=localStorage.getItem("token"),t=Object(a.useState)([]),n=Object(l.a)(t,2),o=n[0],c=n[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),d=s[0],h=s[1];return Object(a.useEffect)((function(){e?(M.get("http://localhost:5000/users/single_user",{headers:{token:e}}).then((function(e){h(e.data.name)})).catch((function(e){console.log(e)})),M.get("http://localhost:5000/users/all_users",{headers:{token:e}}).then((function(e){c(e.data)})).catch((function(e){console.log(e)}))):window.alert("You are not logged in")}),[e]),Object(f.jsxs)(i.a,{children:[Object(f.jsx)(v,{username:d}),Object(f.jsx)(F,{token:e}),Object(f.jsx)(G,{token:e}),Object(f.jsx)(u.a,{style:{marginTop:"5px"},variant:"h5",component:"h2",align:"center",gutterBottom:!0,children:"Admin Dashboard"}),Object(f.jsx)(I.a,{children:Object(f.jsx)(N.a,{style:{overflow:"auto",margin:"7px",marginTop:0,border:"1.5px solid rgb(243, 243, 243)",borderBottom:0},children:Object(f.jsxs)(y.a,{children:[Object(f.jsx)(S.a,{children:Object(f.jsxs)(T.a,{children:[Object(f.jsx)(C.a,{children:Object(f.jsx)("b",{children:"User Name"})}),Object(f.jsx)(C.a,{children:Object(f.jsx)("b",{children:"Email"})}),Object(f.jsx)(C.a,{children:Object(f.jsx)("b",{children:"Approval"})}),Object(f.jsx)(C.a,{children:Object(f.jsx)("b",{children:"Role"})}),Object(f.jsx)(C.a,{children:Object(f.jsx)("b",{children:"Actions"})})]})}),Object(f.jsx)(k.a,{children:o.map((function(t){return Object(f.jsx)(W,{token:e,user:t},t._id)}))})]})})})]})},J=n(197),$=n(150),H=n(204),V=n(201),z=n(198),K=n(33),Q=n.n(K),X=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),r=Object(l.a)(c,2),i=r[0],s=r[1];return Object(f.jsx)(J.a,{children:Object(f.jsxs)($.a,{elevation:10,style:{padding:20,height:"70vh",width:280,margin:"20px auto"},children:[Object(f.jsxs)(J.a,{align:"center",children:[Object(f.jsx)(H.a,{style:{backgroundColor:"rgb(51, 70, 176)"},children:Object(f.jsx)(Q.a,{style:{backgroundColor:"rgb(51, 70, 176)"}})}),Object(f.jsx)("h2",{style:{marginTop:"20px"},children:"Login"})]}),Object(f.jsx)(V.a,{label:"Email",placeholder:"Enter Email",fullWidth:!0,required:!0,value:n,style:{marginTop:"20px"},onChange:function(e){o(e.target.value)}}),Object(f.jsx)(V.a,{label:"Password",placeholder:"Enter password",type:"password",fullWidth:!0,required:!0,style:{marginTop:"7px"},value:i,onChange:function(e){s(e.target.value)}}),Object(f.jsx)(p.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"58px"},fullWidth:!0,onClick:function(){q.a.post("http://localhost:5000/users/login",{email:n,password:i}).then((function(e){return e.data})).then((function(e){400===e.status?(console.log(e),window.alert(e.message)):(localStorage.setItem("token",e.token),e.user.isAdmin?window.location.replace("http://".concat(window.location.host,"/dashboard")):e.user.approved?window.location.replace("http://".concat(window.location.host,"/loggedIn")):window.location.replace("http://".concat(window.location.host,"/unapproved")))})).catch((function(e){console.log(e)}))},children:"Log in"}),Object(f.jsxs)(u.a,{style:{marginTop:"5px"},children:[" ","New here? ",Object(f.jsx)(z.a,{href:"/register",children:"Register"})]}),Object(f.jsxs)(u.a,{style:{marginTop:"5px"},children:[" ","Forgot password? ",Object(f.jsx)(z.a,{href:"/forgotPassword",children:"Click here"})]})]})})},Z=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(l.a)(r,2),s=i[0],d=i[1],h=Object(a.useState)(""),j=Object(l.a)(h,2),b=j[0],g=j[1];return Object(f.jsx)(o.a.Fragment,{children:Object(f.jsx)(J.a,{children:Object(f.jsxs)($.a,{elevation:10,style:{padding:20,height:"70vh",width:280,margin:"20px auto"},children:[Object(f.jsxs)(J.a,{align:"center",children:[Object(f.jsx)(H.a,{style:{backgroundColor:"blue"},children:Object(f.jsx)(Q.a,{})}),Object(f.jsx)("h2",{style:{marginTop:"20px"},children:"Register"})]}),Object(f.jsx)(V.a,{label:"Name",placeholder:"Enter Name",fullWidth:!0,required:!0,value:n,style:{marginTop:"15px"},onChange:function(e){c(e.target.value)}}),Object(f.jsx)(V.a,{label:"Email",placeholder:"Enter Email",fullWidth:!0,required:!0,value:b,onChange:function(e){g(e.target.value)}}),Object(f.jsx)(V.a,{label:"Password",placeholder:"Enter password",type:"password",fullWidth:!0,required:!0,value:s,onChange:function(e){d(e.target.value)}}),Object(f.jsx)(p.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"50px"},fullWidth:!0,onClick:function(){s.length<6?window.alert("Password length should be more than 6"):q.a.post("http://localhost:5000/users/register",{name:n,email:b,password:s}).then((function(e){200===e.data.status?(window.alert("Registered sucessfully"),window.alert(e.data.message),window.location.replace("http://".concat(window.location.host,"/login"))):400===e.data.status?e.data.message&&(window.alert(e.data.message),window.location.reload()):(window.alert("Some error occured. check console."),console.log(e.data))})).catch((function(e){console.log(e)}))},children:"Register"}),Object(f.jsxs)(u.a,{style:{marginTop:"5px"},children:[" ","Have an account?",Object(f.jsx)(z.a,{href:"/login",children:" Login"})]})]})})})},ee=Object(d.a)({container:{display:"flex",flexDirection:"column"},login:{margin:"50px"},register:{margin:"0 50px"}}),te=function(){var e=ee();return Object(f.jsx)(o.a.Fragment,{children:Object(f.jsxs)(I.a,{className:e.container,maxWidth:"xs",children:[Object(f.jsx)(p.a,{className:e.login,variant:"contained",color:"primary",href:"/login",children:"Login"}),Object(f.jsx)(p.a,{className:e.register,variant:"contained",color:"primary",href:"/register",children:"Register"})]})})},ne=function(){return Object(f.jsx)("h1",{children:"not found"})},ae=Object(d.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}})),oe=function(){var e=ae();return Object(f.jsxs)(i.a,{children:[Object(f.jsx)("div",{className:e.root,children:Object(f.jsx)(h.a,{position:"static",style:{marginBottom:"5px"},children:Object(f.jsxs)(j.a,{children:[Object(f.jsx)(b.a,{href:"/",edge:"start",className:e.menuButton,color:"inherit","aria-label":"home",children:Object(f.jsx)(m.a,{})}),Object(f.jsx)(u.a,{variant:"h6",className:e.title,children:"Payment Management Service"}),Object(f.jsx)("div",{children:Object(f.jsx)(p.a,{className:e.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",href:"/login",children:"Log In"})})]})})}),Object(f.jsx)(u.a,{style:{marginTop:"5px"},variant:"h5",component:"h2",align:"center",gutterBottom:!0,children:"You are not approved by the admin"})]})},ce=n(17),re=function(){var e=localStorage.getItem("token"),t=Object(a.useState)(""),n=Object(l.a)(t,2),o=n[0],c=n[1];return Object(a.useEffect)((function(){e?ce.get("http://localhost:5000/users/single_user",{headers:{token:e}}).then((function(e){c(e.data.name)})).catch((function(e){console.log(e)})):window.alert("You are not logged in")}),[e]),Object(f.jsxs)(i.a,{children:[Object(f.jsx)(v,{username:o}),Object(f.jsx)(u.a,{style:{marginTop:"5px"},variant:"h5",component:"h2",align:"center",gutterBottom:!0,children:"You are Logged in"}),Object(f.jsx)(p.a,{style:{margin:20},variant:"contained",color:"primary",onClick:function(){e?ce.put("http://localhost:5000/users/mailResetPassword",{headers:{token:e}}).then((function(e){window.alert(e.data.message)})).catch((function(e){console.log(e)})):window.alert("You are not logged in")},children:"Reset Password"})]})},ie=function(e){var t=e.match.params.token,n=Object(a.useState)(""),o=Object(l.a)(n,2),c=o[0],r=o[1];return Object(f.jsx)(J.a,{children:Object(f.jsxs)($.a,{elevation:10,style:{padding:20,height:"70vh",width:280,margin:"20px auto"},children:[Object(f.jsxs)(J.a,{align:"center",children:[Object(f.jsx)(H.a,{style:{backgroundColor:"rgb(51, 70, 176)"},children:Object(f.jsx)(Q.a,{style:{backgroundColor:"rgb(51, 70, 176)"}})}),Object(f.jsx)("h2",{style:{marginTop:"20px"},children:"Login"})]}),Object(f.jsx)(V.a,{label:"New Password",placeholder:"Enter new password",type:"password",fullWidth:!0,required:!0,style:{marginTop:"7px"},value:c,onChange:function(e){r(e.target.value)}}),Object(f.jsx)(p.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"68px"},fullWidth:!0,onClick:function(){c.length<6?window.alert("Password should be more than 6"):q.a.put("http://localhost:5000/users/changePassword",{password:c},{headers:{token:t}}).then((function(e){return e.data})).then((function(e){400===e.status?window.alert(e.message):(window.alert(e.message),window.location.replace("http://".concat(window.location.host,"/login")))})).catch((function(e){console.log(e)}))},children:"Reset"})]})})},se=Object(d.a)((function(e){return{root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},button_menu:{color:"white"},title:{flexGrow:1}}})),le=function(e){var t=e.match.params.token,n=se();return Object(f.jsxs)(i.a,{children:[Object(f.jsx)("div",{className:n.root,children:Object(f.jsx)(h.a,{position:"static",style:{marginBottom:"5px"},children:Object(f.jsxs)(j.a,{children:[Object(f.jsx)(b.a,{href:"/",edge:"start",className:n.menuButton,color:"inherit","aria-label":"home",children:Object(f.jsx)(m.a,{})}),Object(f.jsx)(u.a,{variant:"h6",className:n.title,children:"Payment management service"}),Object(f.jsx)("div",{children:Object(f.jsx)(p.a,{className:n.button_menu,"aria-controls":"simple-menu","aria-haspopup":"true",href:"/login",children:"Log In"})})]})})}),Object(f.jsx)(p.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"68px"},onClick:function(){q.a.put("http://localhost:5000/api/verifyUser/".concat(t)).then((function(e){return e.data})).then((function(e){400===e.status?window.alert(e.message):(window.alert(e.message),window.location.replace("http://".concat(window.location.host,"/login")))})).catch((function(e){console.log(e)}))},children:"Verify"})]})},de=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(f.jsx)(J.a,{children:Object(f.jsxs)($.a,{elevation:10,style:{padding:20,height:"70vh",width:280,margin:"20px auto"},children:[Object(f.jsxs)(J.a,{align:"center",children:[Object(f.jsx)(H.a,{style:{backgroundColor:"rgb(51, 70, 176)"},children:Object(f.jsx)(Q.a,{style:{backgroundColor:"rgb(51, 70, 176)"}})}),Object(f.jsx)("h2",{style:{marginTop:"20px"},children:"Forgot Password"})]}),Object(f.jsx)(V.a,{label:"Email",placeholder:"Enter Email",type:"Email",fullWidth:!0,required:!0,style:{marginTop:"7px"},value:n,onChange:function(e){o(e.target.value)}}),Object(f.jsx)(p.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",marginTop:"68px"},fullWidth:!0,onClick:function(){q.a.put("http://localhost:5000/users/forgotPassword/".concat(n)).then((function(e){return e.data})).then((function(e){400===e.status?window.alert(e.message):(window.alert(e.message),window.location.replace("http://".concat(window.location.host,"/login")))})).catch((function(e){console.log(e)}))},children:"Send mail"})]})})},he=function(){return Object(f.jsx)(i.a,{children:Object(f.jsxs)(s.c,{children:[Object(f.jsx)(s.a,{exact:!0,path:"/",component:te}),Object(f.jsx)(s.a,{exact:!0,path:"/dashboard",component:Y}),Object(f.jsx)(s.a,{exact:!0,path:"/login",component:X}),Object(f.jsx)(s.a,{exact:!0,path:"/register",component:Z}),Object(f.jsx)(s.a,{exact:!0,path:"/unapproved",component:oe}),Object(f.jsx)(s.a,{exact:!0,path:"/loggedIn",component:re}),Object(f.jsx)(s.a,{exact:!0,path:"/forgotPassword",component:de}),Object(f.jsx)(s.a,{path:"/resetPassword/:token",component:ie}),Object(f.jsx)(s.a,{path:"/verifyUser/:token",component:le}),Object(f.jsx)(s.a,{component:ne})]})})};r.a.render(Object(f.jsx)(he,{}),document.getElementById("root"))},87:function(e,t){}},[[147,1,2]]]);
//# sourceMappingURL=main.8824084f.chunk.js.map